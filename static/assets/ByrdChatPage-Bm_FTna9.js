import{a as l,S as A,C as P,P as B,W as z,e as H,A as F,D as k,B as q,M as E,f as N,h as G,j as e,c as W}from"./three-D8wphWKn.js";import{c as m,a as v,b as U,A as Y,S as O}from"./index-C4LYbiTm.js";import"./charts-DXygg0Z3.js";const K=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],V=m("bot",K);const J=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Q=m("chevron-down",J);const X=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Z=m("chevron-up",X);const ee=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],te=m("circle-alert",ee);const se=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],L=m("refresh-cw",se);const ae=[["path",{d:"M16.466 7.5C15.643 4.237 13.952 2 12 2 9.239 2 7 6.477 7 12s2.239 10 5 10c.342 0 .677-.069 1-.2",key:"10n0gc"}],["path",{d:"m15.194 13.707 3.814 1.86-1.86 3.814",key:"16shm9"}],["path",{d:"M19 15.57c-1.804.885-4.274 1.43-7 1.43-5.523 0-10-2.239-10-5s4.477-5 10-5c4.838 0 8.873 1.718 9.8 4",key:"1lxi77"}]],re=m("rotate-3d",ae);const ne=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],le=m("send",ne);const ie=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ce=m("user",ie);function oe({animationState:t="idle",className:s}){const i=l.useRef(null),o=l.useRef(null),a=l.useRef(null),r=l.useRef(null),n=l.useRef(null),[p,d]=l.useState(!0),[$]=l.useState(!0);l.useEffect(()=>{if(!i.current)return;const x=i.current,y=x.clientWidth,w=x.clientHeight,c=new A;c.background=new P(16317180),o.current=c;const g=new B(45,y/w,.1,100);g.position.set(0,0,5),a.current=g;const u=new z({antialias:!0,alpha:!0});u.setSize(y,w),u.setPixelRatio(Math.min(window.devicePixelRatio,2)),u.shadowMap.enabled=!0,u.shadowMap.type=H,x.appendChild(u.domElement),r.current=u;const j=new F(16777215,.4);c.add(j);const f=new k(16777215,1);f.position.set(5,5,5),f.castShadow=!0,c.add(f);const M=new k(16777215,.5);M.position.set(-5,3,2),c.add(M);const S=new k(8141549,.8);S.position.set(0,5,-5),c.add(S),T(c),d(!1);let R;const C=()=>{if(R=requestAnimationFrame(C),n.current){const h=Date.now()*.001;t==="idle"?(n.current.rotation.y=Math.sin(h*.5)*.1,n.current.position.y=Math.sin(h*2)*.05):t==="thinking"?(n.current.rotation.y=h*2,n.current.position.y=Math.sin(h*5)*.1):t==="speaking"&&(n.current.rotation.y=Math.sin(h*3)*.2,n.current.scale.y=1+Math.sin(h*10)*.05)}r.current&&o.current&&a.current&&r.current.render(o.current,a.current)};C();const _=()=>{if(!x||!a.current||!r.current)return;const h=x.clientWidth,D=x.clientHeight;a.current.aspect=h/D,a.current.updateProjectionMatrix(),r.current.setSize(h,D)};return window.addEventListener("resize",_),()=>{window.removeEventListener("resize",_),cancelAnimationFrame(R),r.current&&x.contains(r.current.domElement)&&x.removeChild(r.current.domElement),r.current?.dispose()}},[t]);function T(x){const y=new q(1,1,1),w=new E({color:8141549,metalness:.3,roughness:.4}),c=new N(y,w);c.position.set(0,0,0),x.add(c),n.current=c;const g=new G(.1,16,16),u=new E({color:16777215,emissive:8141549,emissiveIntensity:.5}),j=new N(g,u);j.position.set(-.2,.1,.5),c.add(j);const f=new N(g,u);f.position.set(.2,.1,.5),c.add(f)}return e.jsxs("div",{ref:i,className:v("relative w-full h-full bg-gradient-to-b from-slate-50 to-white dark:from-slate-900 dark:to-slate-800",s),children:[p&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-100 dark:bg-slate-800",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}),$&&!p&&e.jsx("div",{className:"absolute top-4 right-4 flex gap-2 z-10",children:e.jsx("button",{onClick:()=>{a.current&&(a.current.position.set(0,0,5),a.current.lookAt(0,0,0))},className:"p-2 bg-white dark:bg-slate-700 rounded-lg shadow-lg hover:shadow-xl transition-shadow",title:"Reset view",children:e.jsx(re,{className:"w-5 h-5 text-slate-700 dark:text-slate-200"})})})]})}function de(){const[t,s]=l.useState(!0);return e.jsxs("div",{className:"px-4 py-2 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700",children:[!t&&e.jsxs("button",{onClick:()=>s(!0),className:"w-full flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4 text-purple-600 dark:text-purple-400 animate-spin"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:"Phase 3: PRACTICE"})]}),e.jsx(Q,{className:"w-4 h-4 text-slate-400"})]}),t&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4 text-purple-600 dark:text-purple-400 animate-spin-slow"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:"ðŸ”„ RSI Cycle #28"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Phase 3: PRACTICE â€¢ 2m 34s remaining"})]})]}),e.jsx("button",{onClick:()=>s(!1),className:"p-1 hover:bg-slate-100 dark:hover:bg-slate-700 rounded transition-colors",children:e.jsx(Z,{className:"w-4 h-4 text-slate-400"})})]}),e.jsxs("div",{className:"flex gap-4 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Emergence:"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:"0.847 â†‘"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Treasury:"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:"$12.4K"})]})]})]})]})}const I=W(t=>({byrdState:null,messages:[],animationState:"idle",isTyping:!1,setByrdState:s=>t({byrdState:s}),setAnimationState:s=>t({animationState:s}),addMessage:s=>t(i=>({messages:[...i.messages,s]})),clearMessages:()=>t({messages:[]}),setTyping:s=>t({isTyping:s})}));function xe(t){const s=new Date(t),o=new Date().getTime()-s.getTime(),a=Math.floor(o/1e3),r=Math.floor(a/60),n=Math.floor(r/60),p=Math.floor(n/24);return a<60?"just now":r<60?`${r}m ago`:n<24?`${n}h ago`:p<7?`${p}d ago`:s.toLocaleDateString()}function ue({message:t}){const s=t.type==="user";return t.type==="system"?e.jsx("div",{className:"flex justify-center animate-fade-in",children:e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-amber-100 dark:bg-amber-900/30 rounded-full",children:[e.jsx(te,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"}),e.jsx("span",{className:"text-sm font-medium text-amber-900 dark:text-amber-100",children:t.content})]})}):e.jsx("div",{className:b("flex",s?"justify-end":"justify-start","animate-slide-up"),children:e.jsxs("div",{className:b("flex gap-3 max-w-[85%]",s?"flex-row-reverse":"flex-row"),children:[e.jsx("div",{className:b("flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center",s?"bg-blue-600 text-white":"bg-purple-600 dark:bg-purple-500 text-white"),children:s?e.jsx(ce,{className:"w-5 h-5"}):e.jsx(V,{className:"w-5 h-5"})}),e.jsxs("div",{className:b("flex flex-col",s?"items-end":"items-start"),children:[e.jsx("div",{className:b("px-4 py-2.5 rounded-2xl text-sm leading-relaxed",s?"bg-blue-600 text-white rounded-br-sm":"bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 border border-slate-200 dark:border-slate-700 rounded-bl-sm"),children:t.content}),e.jsx("span",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1 px-1",children:xe(t.timestamp)})]})]})})}function b(...t){return t.filter(Boolean).join(" ")}function he(){return e.jsx("div",{className:"flex justify-start animate-slide-up",children:e.jsxs("div",{className:"flex gap-3 max-w-[85%]",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 dark:bg-purple-500 flex items-center justify-center",children:e.jsx("span",{className:"text-sm",children:"ðŸ¦"})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 px-4 py-3 rounded-2xl rounded-bl-sm",children:e.jsx("div",{className:"flex gap-1.5",children:[0,1,2].map(t=>e.jsx("span",{className:"w-2 h-2 bg-slate-400 dark:bg-slate-500 rounded-full animate-pulse",style:{animationDelay:`${t*.15}s`,animationDuration:"0.8s"}},t))})})]})})}function me(){const{messages:t,isTyping:s}=I(),i=l.useRef(null),o=l.useRef(t.length);return l.useEffect(()=>{t.length>o.current&&i.current?.scrollTo({top:i.current.scrollHeight,behavior:"smooth"}),o.current=t.length},[t.length]),e.jsxs("div",{ref:i,className:"flex-1 overflow-y-auto px-4 py-4 space-y-4",children:[t.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-3xl",children:"ðŸ¦"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Start a conversation with BYRD"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 max-w-xs",children:"Ask about RSI cycles, set priorities, or inject new desires"})]})]}),t.map(a=>e.jsx(ue,{message:a},a.id)),s&&e.jsx(he,{})]})}function pe(){const[t,s]=l.useState(""),[i,o]=l.useState(!1),a=l.useRef(null),{addMessage:r,isTyping:n}=I();l.useEffect(()=>{const d=a.current;d&&(d.style.height="auto",d.style.height=`${Math.min(d.scrollHeight,200)}px`)},[t]);const p=async d=>{d.preventDefault(),!(!t.trim()||n)&&(r({id:`msg_${Date.now()}`,type:"user",content:t.trim(),timestamp:new Date().toISOString()}),s(""),setTimeout(()=>{r({id:`msg_${Date.now()}_response`,type:"byrd",content:"I received your message. Processing...",timestamp:new Date().toISOString()})},1e3))};return e.jsx("form",{onSubmit:p,className:v("flex-shrink-0 bg-white dark:bg-slate-900 border-t border-slate-200 dark:border-slate-700 p-4",i&&"shadow-lg"),children:e.jsxs("div",{className:"flex items-end gap-2 max-w-4xl mx-auto",children:[e.jsx("div",{className:"flex-1 relative",children:e.jsx("textarea",{ref:a,value:t,onChange:d=>s(d.target.value),onFocus:()=>o(!0),onBlur:()=>o(!1),placeholder:"Type to BYRD...",rows:1,className:v("w-full px-4 py-3 pr-2 rounded-xl resize-none","bg-slate-100 dark:bg-slate-800","border border-transparent","focus:bg-white dark:focus:bg-slate-700","focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20","text-slate-900 dark:text-slate-100 placeholder-slate-400","transition-all duration-200","max-h-48 overflow-y-auto"),disabled:n})}),e.jsx("button",{type:"submit",disabled:!t.trim()||n,className:v("p-3 rounded-xl transition-all duration-200","bg-purple-600 hover:bg-purple-700 text-white","disabled:bg-slate-300 dark:disabled:bg-slate-700 disabled:cursor-not-allowed","active:scale-95"),children:e.jsx(le,{className:"w-5 h-5"})})]})})}function ye(){const t=U();return e.jsxs("div",{className:"flex flex-col h-screen bg-slate-50 dark:bg-slate-900",children:[e.jsx("header",{className:"flex-shrink-0 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[e.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors","aria-label":"Go back",children:e.jsx(Y,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"})}),e.jsx("h1",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"BYRD"}),e.jsx("button",{className:"p-2 -mr-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors","aria-label":"Settings",children:e.jsx(O,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"})})]})}),e.jsx("div",{className:"flex-shrink-0 h-[45vh] min-h-[320px] max-h-[600px] relative",children:e.jsx(oe,{modelPath:"/models/cat.glb",animationState:"idle",autoRotate:!1,className:"w-full h-full"})}),e.jsx(de,{}),e.jsx("div",{className:"flex-1 min-h-0 bg-white dark:bg-slate-800",children:e.jsx(me,{})}),e.jsx(pe,{})]})}export{ye as ByrdChatPage};
