import{E as qe,V as N,M as B,T as X,S as Pe,Q as Te,e as T,f as Qe,P as Je,h as et,a as x,i as tt,C as at,k as st,W as nt,l as ot,A as rt,D as le,B as it,m as Se,n as ce,o as lt,j as a,c as ct}from"./three-DJcLMhxG.js";import{c as _,a as te,H as dt,b as ut,A as mt,S as ht}from"./index-BQvJp2TT.js";import{I as pt}from"./info-Bt3XiUjo.js";import"./charts-B4tPbF-_.js";const ft=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],xt=_("bot",ft);const gt=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],ue=_("camera",gt);const bt=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],yt=_("chevron-down",bt);const wt=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],jt=_("chevron-up",wt);const kt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Nt=_("circle-alert",kt);const Et=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ve=_("refresh-cw",Et);const Mt=[["path",{d:"M16.466 7.5C15.643 4.237 13.952 2 12 2 9.239 2 7 6.477 7 12s2.239 10 5 10c.342 0 .677-.069 1-.2",key:"10n0gc"}],["path",{d:"m15.194 13.707 3.814 1.86-1.86 3.814",key:"16shm9"}],["path",{d:"M19 15.57c-1.804.885-4.274 1.43-7 1.43-5.523 0-10-2.239-10-5s4.477-5 10-5c4.838 0 8.873 1.718 9.8 4",key:"1lxi77"}]],Pt=_("rotate-3d",Mt);const Tt=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],St=_("send",Tt);const vt=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Rt=_("user",vt),Re={type:"change"},de={type:"start"},De={type:"end"},ee=new Qe,Ae=new Je,Dt=Math.cos(70*et.DEG2RAD);class At extends qe{constructor(l,y){super(),this.object=l,this.domElement=y,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new N,this.cursor=new N,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:B.ROTATE,MIDDLE:B.DOLLY,RIGHT:B.PAN},this.touches={ONE:X.ROTATE,TWO:X.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return i.phi},this.getAzimuthalAngle=function(){return i.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(t){t.addEventListener("keydown",re),this._domElementKeyEvents=t},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",re),this._domElementKeyEvents=null},this.saveState=function(){e.target0.copy(e.target),e.position0.copy(e.object.position),e.zoom0=e.object.zoom},this.reset=function(){e.target.copy(e.target0),e.object.position.copy(e.position0),e.object.zoom=e.zoom0,e.object.updateProjectionMatrix(),e.dispatchEvent(Re),e.update(),r=n.NONE},this.update=(function(){const t=new N,s=new Te().setFromUnitVectors(l.up,new N(0,1,0)),c=s.clone().invert(),u=new N,j=new Te,K=new N,M=2*Math.PI;return function(Ge=null){const Me=e.object.position;t.copy(Me).sub(e.target),t.applyQuaternion(s),i.setFromVector3(t),e.autoRotate&&r===n.NONE&&Y(Q(Ge)),e.enableDamping?(i.theta+=m.theta*e.dampingFactor,i.phi+=m.phi*e.dampingFactor):(i.theta+=m.theta,i.phi+=m.phi);let L=e.minAzimuthAngle,I=e.maxAzimuthAngle;isFinite(L)&&isFinite(I)&&(L<-Math.PI?L+=M:L>Math.PI&&(L-=M),I<-Math.PI?I+=M:I>Math.PI&&(I-=M),L<=I?i.theta=Math.max(L,Math.min(I,i.theta)):i.theta=i.theta>(L+I)/2?Math.max(L,i.theta):Math.min(I,i.theta)),i.phi=Math.max(e.minPolarAngle,Math.min(e.maxPolarAngle,i.phi)),i.makeSafe(),e.enableDamping===!0?e.target.addScaledVector(P,e.dampingFactor):e.target.add(P),e.target.sub(e.cursor),e.target.clampLength(e.minTargetRadius,e.maxTargetRadius),e.target.add(e.cursor),e.zoomToCursor&&g||e.object.isOrthographicCamera?i.radius=ne(i.radius):i.radius=ne(i.radius*R),t.setFromSpherical(i),t.applyQuaternion(c),Me.copy(e.target).add(t),e.object.lookAt(e.target),e.enableDamping===!0?(m.theta*=1-e.dampingFactor,m.phi*=1-e.dampingFactor,P.multiplyScalar(1-e.dampingFactor)):(m.set(0,0,0),P.set(0,0,0));let ie=!1;if(e.zoomToCursor&&g){let W=null;if(e.object.isPerspectiveCamera){const G=t.length();W=ne(G*R);const J=G-W;e.object.position.addScaledVector(O,J),e.object.updateMatrixWorld()}else if(e.object.isOrthographicCamera){const G=new N(p.x,p.y,0);G.unproject(e.object),e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/R)),e.object.updateProjectionMatrix(),ie=!0;const J=new N(p.x,p.y,0);J.unproject(e.object),e.object.position.sub(J).add(G),e.object.updateMatrixWorld(),W=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),e.zoomToCursor=!1;W!==null&&(this.screenSpacePanning?e.target.set(0,0,-1).transformDirection(e.object.matrix).multiplyScalar(W).add(e.object.position):(ee.origin.copy(e.object.position),ee.direction.set(0,0,-1).transformDirection(e.object.matrix),Math.abs(e.object.up.dot(ee.direction))<Dt?l.lookAt(e.target):(Ae.setFromNormalAndCoplanarPoint(e.object.up,e.target),ee.intersectPlane(Ae,e.target))))}else e.object.isOrthographicCamera&&(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/R)),e.object.updateProjectionMatrix(),ie=!0);return R=1,g=!1,ie||u.distanceToSquared(e.object.position)>b||8*(1-j.dot(e.object.quaternion))>b||K.distanceToSquared(e.target)>0?(e.dispatchEvent(Re),u.copy(e.object.position),j.copy(e.object.quaternion),K.copy(e.target),!0):!1}})(),this.dispose=function(){e.domElement.removeEventListener("contextmenu",Ne),e.domElement.removeEventListener("pointerdown",je),e.domElement.removeEventListener("pointercancel",V),e.domElement.removeEventListener("wheel",ke),e.domElement.removeEventListener("pointermove",oe),e.domElement.removeEventListener("pointerup",V),e._domElementKeyEvents!==null&&(e._domElementKeyEvents.removeEventListener("keydown",re),e._domElementKeyEvents=null)};const e=this,n={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let r=n.NONE;const b=1e-6,i=new Pe,m=new Pe;let R=1;const P=new N,S=new T,v=new T,z=new T,D=new T,A=new T,d=new T,w=new T,k=new T,h=new T,O=new N,p=new T;let g=!1;const f=[],H={};function Q(t){return t!==null?2*Math.PI/60*e.autoRotateSpeed*t:2*Math.PI/60/60*e.autoRotateSpeed}function F(t){const s=Math.abs(t)/(100*(window.devicePixelRatio|0));return Math.pow(.95,e.zoomSpeed*s)}function Y(t){m.theta-=t}function U(t){m.phi-=t}const $=(function(){const t=new N;return function(c,u){t.setFromMatrixColumn(u,0),t.multiplyScalar(-c),P.add(t)}})(),E=(function(){const t=new N;return function(c,u){e.screenSpacePanning===!0?t.setFromMatrixColumn(u,1):(t.setFromMatrixColumn(u,0),t.crossVectors(e.object.up,t)),t.multiplyScalar(c),P.add(t)}})(),C=(function(){const t=new N;return function(c,u){const j=e.domElement;if(e.object.isPerspectiveCamera){const K=e.object.position;t.copy(K).sub(e.target);let M=t.length();M*=Math.tan(e.object.fov/2*Math.PI/180),$(2*c*M/j.clientHeight,e.object.matrix),E(2*u*M/j.clientHeight,e.object.matrix)}else e.object.isOrthographicCamera?($(c*(e.object.right-e.object.left)/e.object.zoom/j.clientWidth,e.object.matrix),E(u*(e.object.top-e.object.bottom)/e.object.zoom/j.clientHeight,e.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),e.enablePan=!1)}})();function ae(t){e.object.isPerspectiveCamera||e.object.isOrthographicCamera?R/=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function me(t){e.object.isPerspectiveCamera||e.object.isOrthographicCamera?R*=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function se(t,s){if(!e.zoomToCursor)return;g=!0;const c=e.domElement.getBoundingClientRect(),u=t-c.left,j=s-c.top,K=c.width,M=c.height;p.x=u/K*2-1,p.y=-(j/M)*2+1,O.set(p.x,p.y,1).unproject(e.object).sub(e.object.position).normalize()}function ne(t){return Math.max(e.minDistance,Math.min(e.maxDistance,t))}function he(t){S.set(t.clientX,t.clientY)}function Ce(t){se(t.clientX,t.clientX),w.set(t.clientX,t.clientY)}function pe(t){D.set(t.clientX,t.clientY)}function Le(t){v.set(t.clientX,t.clientY),z.subVectors(v,S).multiplyScalar(e.rotateSpeed);const s=e.domElement;Y(2*Math.PI*z.x/s.clientHeight),U(2*Math.PI*z.y/s.clientHeight),S.copy(v),e.update()}function Ie(t){k.set(t.clientX,t.clientY),h.subVectors(k,w),h.y>0?ae(F(h.y)):h.y<0&&me(F(h.y)),w.copy(k),e.update()}function _e(t){A.set(t.clientX,t.clientY),d.subVectors(A,D).multiplyScalar(e.panSpeed),C(d.x,d.y),D.copy(A),e.update()}function ze(t){se(t.clientX,t.clientY),t.deltaY<0?me(F(t.deltaY)):t.deltaY>0&&ae(F(t.deltaY)),e.update()}function He(t){let s=!1;switch(t.code){case e.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?U(2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):C(0,e.keyPanSpeed),s=!0;break;case e.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?U(-2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):C(0,-e.keyPanSpeed),s=!0;break;case e.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?Y(2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):C(e.keyPanSpeed,0),s=!0;break;case e.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?Y(-2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):C(-e.keyPanSpeed,0),s=!0;break}s&&(t.preventDefault(),e.update())}function fe(t){if(f.length===1)S.set(t.pageX,t.pageY);else{const s=Z(t),c=.5*(t.pageX+s.x),u=.5*(t.pageY+s.y);S.set(c,u)}}function xe(t){if(f.length===1)D.set(t.pageX,t.pageY);else{const s=Z(t),c=.5*(t.pageX+s.x),u=.5*(t.pageY+s.y);D.set(c,u)}}function ge(t){const s=Z(t),c=t.pageX-s.x,u=t.pageY-s.y,j=Math.sqrt(c*c+u*u);w.set(0,j)}function Ye(t){e.enableZoom&&ge(t),e.enablePan&&xe(t)}function Ke(t){e.enableZoom&&ge(t),e.enableRotate&&fe(t)}function be(t){if(f.length==1)v.set(t.pageX,t.pageY);else{const c=Z(t),u=.5*(t.pageX+c.x),j=.5*(t.pageY+c.y);v.set(u,j)}z.subVectors(v,S).multiplyScalar(e.rotateSpeed);const s=e.domElement;Y(2*Math.PI*z.x/s.clientHeight),U(2*Math.PI*z.y/s.clientHeight),S.copy(v)}function ye(t){if(f.length===1)A.set(t.pageX,t.pageY);else{const s=Z(t),c=.5*(t.pageX+s.x),u=.5*(t.pageY+s.y);A.set(c,u)}d.subVectors(A,D).multiplyScalar(e.panSpeed),C(d.x,d.y),D.copy(A)}function we(t){const s=Z(t),c=t.pageX-s.x,u=t.pageY-s.y,j=Math.sqrt(c*c+u*u);k.set(0,j),h.set(0,Math.pow(k.y/w.y,e.zoomSpeed)),ae(h.y),w.copy(k);const K=(t.pageX+s.x)*.5,M=(t.pageY+s.y)*.5;se(K,M)}function Fe(t){e.enableZoom&&we(t),e.enablePan&&ye(t)}function Ue(t){e.enableZoom&&we(t),e.enableRotate&&be(t)}function je(t){e.enabled!==!1&&(f.length===0&&(e.domElement.setPointerCapture(t.pointerId),e.domElement.addEventListener("pointermove",oe),e.domElement.addEventListener("pointerup",V)),Ve(t),t.pointerType==="touch"?Xe(t):Ze(t))}function oe(t){e.enabled!==!1&&(t.pointerType==="touch"?$e(t):Be(t))}function V(t){We(t),f.length===0&&(e.domElement.releasePointerCapture(t.pointerId),e.domElement.removeEventListener("pointermove",oe),e.domElement.removeEventListener("pointerup",V)),e.dispatchEvent(De),r=n.NONE}function Ze(t){let s;switch(t.button){case 0:s=e.mouseButtons.LEFT;break;case 1:s=e.mouseButtons.MIDDLE;break;case 2:s=e.mouseButtons.RIGHT;break;default:s=-1}switch(s){case B.DOLLY:if(e.enableZoom===!1)return;Ce(t),r=n.DOLLY;break;case B.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(e.enablePan===!1)return;pe(t),r=n.PAN}else{if(e.enableRotate===!1)return;he(t),r=n.ROTATE}break;case B.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(e.enableRotate===!1)return;he(t),r=n.ROTATE}else{if(e.enablePan===!1)return;pe(t),r=n.PAN}break;default:r=n.NONE}r!==n.NONE&&e.dispatchEvent(de)}function Be(t){switch(r){case n.ROTATE:if(e.enableRotate===!1)return;Le(t);break;case n.DOLLY:if(e.enableZoom===!1)return;Ie(t);break;case n.PAN:if(e.enablePan===!1)return;_e(t);break}}function ke(t){e.enabled===!1||e.enableZoom===!1||r!==n.NONE||(t.preventDefault(),e.dispatchEvent(de),ze(t),e.dispatchEvent(De))}function re(t){e.enabled===!1||e.enablePan===!1||He(t)}function Xe(t){switch(Ee(t),f.length){case 1:switch(e.touches.ONE){case X.ROTATE:if(e.enableRotate===!1)return;fe(t),r=n.TOUCH_ROTATE;break;case X.PAN:if(e.enablePan===!1)return;xe(t),r=n.TOUCH_PAN;break;default:r=n.NONE}break;case 2:switch(e.touches.TWO){case X.DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;Ye(t),r=n.TOUCH_DOLLY_PAN;break;case X.DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;Ke(t),r=n.TOUCH_DOLLY_ROTATE;break;default:r=n.NONE}break;default:r=n.NONE}r!==n.NONE&&e.dispatchEvent(de)}function $e(t){switch(Ee(t),r){case n.TOUCH_ROTATE:if(e.enableRotate===!1)return;be(t),e.update();break;case n.TOUCH_PAN:if(e.enablePan===!1)return;ye(t),e.update();break;case n.TOUCH_DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;Fe(t),e.update();break;case n.TOUCH_DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;Ue(t),e.update();break;default:r=n.NONE}}function Ne(t){e.enabled!==!1&&t.preventDefault()}function Ve(t){f.push(t.pointerId)}function We(t){delete H[t.pointerId];for(let s=0;s<f.length;s++)if(f[s]==t.pointerId){f.splice(s,1);return}}function Ee(t){let s=H[t.pointerId];s===void 0&&(s=new T,H[t.pointerId]=s),s.set(t.pageX,t.pageY)}function Z(t){const s=t.pointerId===f[0]?f[1]:f[0];return H[s]}e.domElement.addEventListener("contextmenu",Ne),e.domElement.addEventListener("pointerdown",je),e.domElement.addEventListener("pointercancel",V),e.domElement.addEventListener("wheel",ke,{passive:!1}),this.update()}}const Ot=[{name:"Front",icon:dt,position:[0,0,5],target:[0,0,0]},{name:"Top",icon:ue,position:[0,5,0],target:[0,0,0]},{name:"Side",icon:ue,position:[5,0,0],target:[0,0,0]}];function Ct({animationState:o="idle",className:l}){const y=x.useRef(null),e=x.useRef(null),n=x.useRef(null),r=x.useRef(null),b=x.useRef(null),i=x.useRef(null),[m,R]=x.useState(!0),[P,S]=x.useState(!1),[v,z]=x.useState(!1),D=d=>{if(n.current&&b.current){const{position:w,target:k}=d;n.current.position.set(...w),b.current.target.set(...k)}};x.useEffect(()=>{if(!y.current)return;const d=y.current,w=d.clientWidth,k=d.clientHeight,h=new tt;h.background=new at(16317180),e.current=h;const O=new st(45,w/k,.1,100);O.position.set(0,0,5),n.current=O;const p=new nt({antialias:!0,alpha:!0});p.setSize(w,k),p.setPixelRatio(Math.min(window.devicePixelRatio,2)),p.shadowMap.enabled=!0,p.shadowMap.type=ot,d.appendChild(p.domElement),r.current=p;const g=new At(O,p.domElement);g.enableDamping=!0,g.dampingFactor=.05,g.enableZoom=!0,g.minDistance=2,g.maxDistance=10,g.enablePan=!1,b.current=g;const f=new rt(16777215,.4);h.add(f);const H=new le(16777215,1);H.position.set(5,5,5),H.castShadow=!0,h.add(H);const Q=new le(16777215,.5);Q.position.set(-5,3,2),h.add(Q);const F=new le(8141549,.8);F.position.set(0,5,-5),h.add(F),A(h),R(!1);let Y;const U=()=>{if(Y=requestAnimationFrame(U),g.update(),i.current){const E=Date.now()*.001;o==="idle"?(i.current.rotation.y=Math.sin(E*.5)*.1,i.current.position.y=Math.sin(E*2)*.05):o==="thinking"?(i.current.rotation.y=E*2,i.current.position.y=Math.sin(E*5)*.1):o==="speaking"&&(i.current.rotation.y=Math.sin(E*3)*.2,i.current.scale.y=1+Math.sin(E*10)*.05)}r.current&&e.current&&n.current&&r.current.render(e.current,n.current)};U();const $=()=>{if(!d||!n.current||!r.current)return;const E=d.clientWidth,C=d.clientHeight;n.current.aspect=E/C,n.current.updateProjectionMatrix(),r.current.setSize(E,C)};return window.addEventListener("resize",$),()=>{window.removeEventListener("resize",$),cancelAnimationFrame(Y),g.dispose(),r.current&&d.contains(r.current.domElement)&&d.removeChild(r.current.domElement),r.current?.dispose()}},[o]),x.useEffect(()=>{if(P){const d=setTimeout(()=>S(!1),5e3);return()=>clearTimeout(d)}},[P]);function A(d){const w=new it(1,1,1),k=new Se({color:8141549,metalness:.3,roughness:.4}),h=new ce(w,k);h.position.set(0,0,0),d.add(h),i.current=h;const O=new lt(.1,16,16),p=new Se({color:16777215,emissive:8141549,emissiveIntensity:.5}),g=new ce(O,p);g.position.set(-.2,.1,.5),h.add(g);const f=new ce(O,p);f.position.set(.2,.1,.5),h.add(f)}return a.jsxs("div",{ref:y,className:te("relative w-full h-full bg-gradient-to-b from-slate-50 to-white dark:from-slate-900 dark:to-slate-800",l),children:[m&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-100 dark:bg-slate-800",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}),!m&&a.jsxs("div",{className:"absolute top-4 right-4 flex gap-2 z-10",children:[a.jsx("button",{onClick:()=>z(!v),className:"p-2 bg-white dark:bg-slate-700 rounded-lg shadow-lg hover:shadow-xl transition-shadow focus:outline-none focus:ring-2 focus:ring-purple-500",title:"Camera presets","aria-label":"Show camera presets",children:a.jsx(ue,{className:"w-5 h-5 text-slate-700 dark:text-slate-200"})}),a.jsx("button",{onClick:()=>S(!P),className:"p-2 bg-white dark:bg-slate-700 rounded-lg shadow-lg hover:shadow-xl transition-shadow focus:outline-none focus:ring-2 focus:ring-purple-500",title:"Show controls info","aria-label":"Show controls info",children:a.jsx(pt,{className:"w-5 h-5 text-slate-700 dark:text-slate-200"})}),a.jsx("button",{onClick:()=>{n.current&&b.current&&(n.current.position.set(0,0,5),b.current.target.set(0,0,0))},className:"p-2 bg-white dark:bg-slate-700 rounded-lg shadow-lg hover:shadow-xl transition-shadow focus:outline-none focus:ring-2 focus:ring-purple-500",title:"Reset view","aria-label":"Reset camera view",children:a.jsx(Pt,{className:"w-5 h-5 text-slate-700 dark:text-slate-200"})})]}),P&&!m&&a.jsx("div",{className:"absolute top-4 left-4 z-10 max-w-xs",children:a.jsxs("div",{className:"bg-white/90 dark:bg-slate-800/90 backdrop-blur-sm rounded-lg shadow-lg p-3 text-xs space-y-2",children:[a.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Controls"}),a.jsxs("div",{className:"space-y-1 text-slate-600 dark:text-slate-400",children:[a.jsxs("p",{children:["ðŸ–±ï¸ ",a.jsx("strong",{children:"Drag"})," to rotate"]}),a.jsxs("p",{children:["ðŸ¤ ",a.jsx("strong",{children:"Pinch"})," to zoom"]}),a.jsxs("p",{children:["âœ‹ ",a.jsx("strong",{children:"Two-finger"})," to pan (disabled)"]})]}),a.jsx("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-700",children:a.jsx("p",{className:"text-[10px] text-slate-500 dark:text-slate-500",children:"Current: Procedural avatar (cat.glb coming soon)"})})]})}),v&&!m&&a.jsx("div",{className:"absolute top-16 right-4 z-10 flex flex-col gap-2",children:Ot.map(d=>{const w=d.icon;return a.jsx("button",{onClick:()=>D(d),className:"p-2 bg-white dark:bg-slate-700 rounded-lg shadow-lg hover:shadow-xl transition-shadow focus:outline-none focus:ring-2 focus:ring-purple-500",title:`Move to ${d.name} view`,"aria-label":`Switch to ${d.name} camera view`,children:a.jsx(w,{className:"w-5 h-5 text-slate-700 dark:text-slate-200"})},d.name)})})]})}function Lt(){const[o,l]=x.useState(!0);return a.jsxs("div",{className:"px-4 py-2 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700",children:[!o&&a.jsxs("button",{onClick:()=>l(!0),className:"w-full flex items-center justify-between text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ve,{className:"w-4 h-4 text-purple-600 dark:text-purple-400 animate-spin"}),a.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:"Phase 3: PRACTICE"})]}),a.jsx(yt,{className:"w-4 h-4 text-slate-400"})]}),o&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ve,{className:"w-4 h-4 text-purple-600 dark:text-purple-400 animate-spin-slow"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:"ðŸ”„ RSI Cycle #28"}),a.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Phase 3: PRACTICE â€¢ 2m 34s remaining"})]})]}),a.jsx("button",{onClick:()=>l(!1),className:"p-1 hover:bg-slate-100 dark:hover:bg-slate-700 rounded transition-colors",children:a.jsx(jt,{className:"w-4 h-4 text-slate-400"})})]}),a.jsxs("div",{className:"flex gap-4 text-xs",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Emergence:"}),a.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:"0.847 â†‘"})]}),a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Treasury:"}),a.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:"$12.4K"})]})]})]})]})}const Oe=ct(o=>({byrdState:null,messages:[],animationState:"idle",isTyping:!1,setByrdState:l=>o({byrdState:l}),setAnimationState:l=>o({animationState:l}),addMessage:l=>o(y=>({messages:[...y.messages,l]})),clearMessages:()=>o({messages:[]}),setTyping:l=>o({isTyping:l})}));function It(o){const l=new Date(o),e=new Date().getTime()-l.getTime(),n=Math.floor(e/1e3),r=Math.floor(n/60),b=Math.floor(r/60),i=Math.floor(b/24);return n<60?"just now":r<60?`${r}m ago`:b<24?`${b}h ago`:i<7?`${i}d ago`:l.toLocaleDateString()}function _t({message:o}){const l=o.type==="user";return o.type==="system"?a.jsx("div",{className:"flex justify-center animate-fade-in",children:a.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-amber-100 dark:bg-amber-900/30 rounded-full",children:[a.jsx(Nt,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"}),a.jsx("span",{className:"text-sm font-medium text-amber-900 dark:text-amber-100",children:o.content})]})}):a.jsx("div",{className:q("flex",l?"justify-end":"justify-start","animate-slide-up"),children:a.jsxs("div",{className:q("flex gap-3 max-w-[85%]",l?"flex-row-reverse":"flex-row"),children:[a.jsx("div",{className:q("flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center",l?"bg-blue-600 text-white":"bg-purple-600 dark:bg-purple-500 text-white"),children:l?a.jsx(Rt,{className:"w-5 h-5"}):a.jsx(xt,{className:"w-5 h-5"})}),a.jsxs("div",{className:q("flex flex-col",l?"items-end":"items-start"),children:[a.jsx("div",{className:q("px-4 py-2.5 rounded-2xl text-sm leading-relaxed",l?"bg-blue-600 text-white rounded-br-sm":"bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 border border-slate-200 dark:border-slate-700 rounded-bl-sm"),children:o.content}),a.jsx("span",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1 px-1",children:It(o.timestamp)})]})]})})}function q(...o){return o.filter(Boolean).join(" ")}function zt(){return a.jsx("div",{className:"flex justify-start animate-slide-up",children:a.jsxs("div",{className:"flex gap-3 max-w-[85%]",children:[a.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 dark:bg-purple-500 flex items-center justify-center",children:a.jsx("span",{className:"text-sm",children:"ðŸ¦"})}),a.jsx("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 px-4 py-3 rounded-2xl rounded-bl-sm",children:a.jsx("div",{className:"flex gap-1.5",children:[0,1,2].map(o=>a.jsx("span",{className:"w-2 h-2 bg-slate-400 dark:bg-slate-500 rounded-full animate-pulse",style:{animationDelay:`${o*.15}s`,animationDuration:"0.8s"}},o))})})]})})}function Ht(){const{messages:o,isTyping:l}=Oe(),y=x.useRef(null),e=x.useRef(o.length);return x.useEffect(()=>{o.length>e.current&&y.current?.scrollTo({top:y.current.scrollHeight,behavior:"smooth"}),e.current=o.length},[o.length]),a.jsxs("div",{ref:y,className:"flex-1 overflow-y-auto px-4 py-4 space-y-4",children:[o.length===0&&a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center space-y-4",children:[a.jsx("div",{className:"w-16 h-16 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-3xl",children:"ðŸ¦"})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Start a conversation with BYRD"}),a.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 max-w-xs",children:"Ask about RSI cycles, set priorities, or inject new desires"})]})]}),o.map(n=>a.jsx(_t,{message:n},n.id)),l&&a.jsx(zt,{})]})}function Yt(){const[o,l]=x.useState(""),[y,e]=x.useState(!1),n=x.useRef(null),{addMessage:r,isTyping:b}=Oe();x.useEffect(()=>{const m=n.current;m&&(m.style.height="auto",m.style.height=`${Math.min(m.scrollHeight,200)}px`)},[o]);const i=async m=>{m.preventDefault(),!(!o.trim()||b)&&(r({id:`msg_${Date.now()}`,type:"user",content:o.trim(),timestamp:new Date().toISOString()}),l(""),setTimeout(()=>{r({id:`msg_${Date.now()}_response`,type:"byrd",content:"I received your message. Processing...",timestamp:new Date().toISOString()})},1e3))};return a.jsx("form",{onSubmit:i,className:te("flex-shrink-0 bg-white dark:bg-slate-900 border-t border-slate-200 dark:border-slate-700 p-4",y&&"shadow-lg"),children:a.jsxs("div",{className:"flex items-end gap-2 max-w-4xl mx-auto",children:[a.jsx("div",{className:"flex-1 relative",children:a.jsx("textarea",{ref:n,value:o,onChange:m=>l(m.target.value),onFocus:()=>e(!0),onBlur:()=>e(!1),placeholder:"Type to BYRD...",rows:1,className:te("w-full px-4 py-3 pr-2 rounded-xl resize-none","bg-slate-100 dark:bg-slate-800","border border-transparent","focus:bg-white dark:focus:bg-slate-700","focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20","text-slate-900 dark:text-slate-100 placeholder-slate-400","transition-all duration-200","max-h-48 overflow-y-auto"),disabled:b})}),a.jsx("button",{type:"submit",disabled:!o.trim()||b,className:te("p-3 rounded-xl transition-all duration-200","bg-purple-600 hover:bg-purple-700 text-white","disabled:bg-slate-300 dark:disabled:bg-slate-700 disabled:cursor-not-allowed","active:scale-95"),children:a.jsx(St,{className:"w-5 h-5"})})]})})}function Xt(){const o=ut();return a.jsxs("div",{className:"flex flex-col h-screen bg-slate-50 dark:bg-slate-900",children:[a.jsx("header",{className:"flex-shrink-0 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-4 py-3",children:a.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[a.jsx("button",{onClick:()=>o(-1),className:"p-2 -ml-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors","aria-label":"Go back",children:a.jsx(mt,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"})}),a.jsx("h1",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"BYRD"}),a.jsx("button",{className:"p-2 -mr-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors","aria-label":"Settings",children:a.jsx(ht,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"})})]})}),a.jsx("div",{className:"flex-shrink-0 h-[45vh] min-h-[320px] max-h-[600px] relative",children:a.jsx(Ct,{modelPath:"/models/cat.glb",animationState:"idle",autoRotate:!1,className:"w-full h-full"})}),a.jsx(Lt,{}),a.jsx("div",{className:"flex-1 min-h-0 bg-white dark:bg-slate-800",children:a.jsx(Ht,{})}),a.jsx(Yt,{})]})}export{Xt as ByrdChatPage};
