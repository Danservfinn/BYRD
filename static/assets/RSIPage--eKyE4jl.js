const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ByrdCatVisualization-CzmJ-Z4u.js","assets/three-CwL82Xzi.js"])))=>i.map(i=>d[i]);
import{a as d,j as e,_ as U}from"./three-CwL82Xzi.js";import{u as y,O as f,S as R,M as v}from"./index-D1JadfMD.js";import"./charts-Cw4TBZXl.js";const g=[{id:"reflect",name:"REFLECT",shortName:"R"},{id:"verify",name:"VERIFY",shortName:"V"},{id:"collapse",name:"COLLAPSE",shortName:"C"},{id:"route",name:"ROUTE",shortName:"R"},{id:"practice",name:"PRACTICE",shortName:"P"},{id:"record",name:"RECORD",shortName:"R"},{id:"crystallize",name:"CRYSTALLIZE",shortName:"C"},{id:"measure",name:"MEASURE",shortName:"M"}];function G({size:t=320,className:s=""}){const{getRSIStatus:c}=y(),[a,l]=d.useState(null),[i,h]=d.useState([]);d.useEffect(()=>{const n=async()=>{const o=await c();o&&(l(o.current_phase||null),h(o.completed_phases||[]))};n();const m=setInterval(n,2e3);return()=>clearInterval(m)},[c]);const p=g.findIndex(n=>n.id===a),r=t/2,x=t/2-20,b=x-40,N=2*Math.PI/g.length,_=d.useMemo(()=>g.map((n,m)=>{const o=m*N-Math.PI/2,j=o+N,u=.02,M=r+x*Math.cos(o+u),$=r+x*Math.sin(o+u),A=r+x*Math.cos(j-u),T=r+x*Math.sin(j-u),w=r+b*Math.cos(j-u),P=r+b*Math.sin(j-u),O=r+b*Math.cos(o+u),k=r+b*Math.sin(o+u),S=N>Math.PI?1:0,D=`
        M ${M} ${$}
        A ${x} ${x} 0 ${S} 1 ${A} ${T}
        L ${w} ${P}
        A ${b} ${b} 0 ${S} 0 ${O} ${k}
        Z
      `,I=o+N/2,C=(x+b)/2,L=r+C*Math.cos(I),z=r+C*Math.sin(I);return{...n,path:D,labelX:L,labelY:z,index:m}}),[t,r,x,b,N]);return e.jsxs("div",{className:`relative ${s}`,children:[e.jsxs("svg",{width:t,height:t,className:"overflow-visible",children:[e.jsxs("defs",{children:[e.jsxs("filter",{id:"phaseGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"4",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),e.jsx("pattern",{id:"scanlines",patternUnits:"userSpaceOnUse",width:"4",height:"4",children:e.jsx("line",{x1:"0",y1:"0",x2:"4",y2:"0",stroke:"rgba(0,255,255,0.03)",strokeWidth:"1"})})]}),e.jsx("circle",{cx:r,cy:r,r:x+10,fill:"var(--obs-bg-elevated)",stroke:"var(--obs-border)",strokeWidth:"1"}),e.jsx("circle",{cx:r,cy:r,r:b-20,fill:"none",stroke:"var(--obs-border)",strokeWidth:"0.5",strokeDasharray:"4 4"}),e.jsx("circle",{cx:r,cy:r,r:b-40,fill:"none",stroke:"var(--obs-border)",strokeWidth:"0.5"}),_.map(n=>{const m=n.id===a,o=i.includes(n.id),j=!m&&!o;return e.jsxs("g",{children:[e.jsx("path",{d:n.path,fill:m||o?`var(--rsi-${n.id})`:"var(--obs-bg-surface)",stroke:m?`var(--rsi-${n.id})`:"var(--obs-border)",strokeWidth:m?2:1,opacity:j?.3:o?.8:1,filter:m?"url(#phaseGlow)":void 0,className:m?"animate-emergence-pulse":""}),e.jsx("text",{x:n.labelX,y:n.labelY,textAnchor:"middle",dominantBaseline:"middle",className:"obs-label",fontSize:"12",fill:m||o?"white":"var(--obs-text-tertiary)",fontWeight:m?"bold":"normal",children:n.shortName})]},n.id)}),e.jsx("circle",{cx:r,cy:r,r:b-50,fill:"var(--obs-bg-base)",stroke:"var(--obs-border)",strokeWidth:"1"}),e.jsx("text",{x:r,y:r-15,textAnchor:"middle",className:"obs-label",fontSize:"10",fill:"var(--obs-text-tertiary)",children:"RSI PHASE"}),e.jsx("text",{x:r,y:r+10,textAnchor:"middle",className:"obs-metric",fontSize:"16",fill:a?`var(--rsi-${a})`:"var(--obs-text-secondary)",children:a?.toUpperCase()||"IDLE"}),e.jsxs("text",{x:r,y:r+35,textAnchor:"middle",className:"obs-label",fontSize:"9",fill:"var(--obs-text-tertiary)",children:[i.length,"/8 COMPLETE"]}),p>=0&&e.jsx("g",{transform:`rotate(${p*45-90}, ${r}, ${r})`,children:e.jsx("polygon",{points:`${r},${r-x-5} ${r-6},${r-x-15} ${r+6},${r-x-15}`,fill:`var(--rsi-${a})`,className:"animate-status-beacon"})}),e.jsx("circle",{cx:r,cy:r,r:x,fill:"url(#scanlines)",pointerEvents:"none"})]}),e.jsx("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 observatory-panel px-3 py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full animate-status-beacon",style:{backgroundColor:a?`var(--rsi-${a})`:"var(--obs-text-tertiary)"}}),e.jsx("span",{className:"obs-label text-[10px] text-[var(--obs-text-secondary)]",children:a?g.find(n=>n.id===a)?.name:"AWAITING CYCLE"})]})})]})}function B(){const{getRalphLoopStatus:t}=y(),[s,c]=d.useState(null);d.useEffect(()=>{const l=async()=>{const h=await t();h&&c(h)};l();const i=setInterval(l,3e3);return()=>clearInterval(i)},[t]);const a=s?.running?"nominal":s?.terminated?"caution":"inactive";return e.jsx(f,{title:"RALPH LOOP",status:a,padding:"lg",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(R,{status:s?.running?"nominal":"inactive",label:s?.running?"RUNNING":"STOPPED",size:"md"}),s?.terminated&&e.jsx("span",{className:"obs-label text-[9px] px-2 py-1 rounded bg-[var(--status-caution)]/20 text-[var(--status-caution)]",children:"TERMINATED"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(v,{label:"ITERATIONS",value:s?.iterations_completed?.toString()||"0",size:"md",status:s?.running?"nominal":"inactive"}),e.jsx(v,{label:"RUNTIME",value:H(s?.total_time_seconds||0),size:"md"}),e.jsx(v,{label:"TOKENS",value:Y(s?.total_tokens||0),size:"md"}),e.jsx(v,{label:"COST",value:`$${(s?.total_cost_usd||0).toFixed(2)}`,size:"md",status:(s?.total_cost_usd||0)>10?"caution":void 0})]}),e.jsxs("div",{className:"pt-4 border-t border-[var(--obs-border)]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"obs-label text-[10px] text-[var(--obs-text-tertiary)]",children:"EMERGENCE CONFIDENCE"}),e.jsxs("span",{className:"obs-metric text-sm",style:{color:"var(--cat-eye-gold)"},children:[((s?.last_emergence?.confidence||0)*100).toFixed(1),"%"]})]}),e.jsx("div",{className:"h-2 bg-[var(--obs-bg-elevated)] rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full transition-all duration-500",style:{width:`${(s?.last_emergence?.confidence||0)*100}%`,background:"linear-gradient(90deg, var(--rsi-reflect), var(--cat-eye-gold))"}})})]}),s?.terminated&&s?.reason&&e.jsxs("div",{className:"pt-4 border-t border-[var(--obs-border)]",children:[e.jsx("span",{className:"obs-label text-[9px] text-[var(--obs-text-tertiary)]",children:"TERMINATION REASON"}),e.jsx("p",{className:"text-xs text-[var(--obs-text-secondary)] mt-1",children:V(s.reason)})]})]})})}function H(t){return t<60?`${Math.floor(t)}s`:t<3600?`${Math.floor(t/60)}m ${Math.floor(t%60)}s`:`${Math.floor(t/3600)}h ${Math.floor(t%3600/60)}m`}function Y(t){return t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}K`:t.toString()}function V(t){return{emergence_detected:"Genuine emergence detected",max_iterations:"Maximum iterations reached",max_cost:"Cost limit exceeded",max_time:"Time limit exceeded",error:"Error occurred",manual_stop:"Manually stopped"}[t]||t}function F(){const{getRSIMetrics:t}=y(),[s,c]=d.useState({});d.useEffect(()=>{const l=async()=>{const h=await t();if(h){const p=h.rsi_metrics||{};c(p)}};l();const i=setInterval(l,5e3);return()=>clearInterval(i)},[t]);const a=s.activation_rate||0;return e.jsx(f,{title:"EMERGENCE METRICS",status:a>.5?"nominal":a>0?"caution":"inactive",padding:"lg",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(E,{label:"ACTIVATION RATE",value:s.activation_rate||0,color:"var(--status-nominal)",description:"Rate of emergent desire activation"}),e.jsx(E,{label:"TRAJECTORY SUCCESS",value:s.trajectory_success_rate||0,color:"var(--data-stream)",description:"Practice trajectory success rate"}),e.jsx(E,{label:"DIRECTION VARIANCE",value:Math.min(1,(s.direction_variance||0)*2),color:"var(--cat-eye-gold)",description:"Diversity of improvement directions"}),e.jsx("div",{className:"pt-4 border-t border-[var(--obs-border)]",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsx(v,{label:"DESIRES",value:s.emergent_desires?.toString()||"0",size:"md",status:"nominal"}),e.jsx(v,{label:"TRAJECTORIES",value:s.trajectories_stored?.toString()||"0",size:"md"}),e.jsx(v,{label:"HEURISTICS",value:s.heuristics_crystallized?.toString()||"0",size:"md",status:(s.heuristics_crystallized||0)>0?"nominal":void 0})]})}),s.domain_distribution&&Object.keys(s.domain_distribution).length>0&&e.jsxs("div",{className:"pt-4 border-t border-[var(--obs-border)]",children:[e.jsx("span",{className:"obs-label text-[9px] text-[var(--obs-text-tertiary)]",children:"DOMAIN DISTRIBUTION"}),e.jsx("div",{className:"flex gap-2 mt-2 flex-wrap",children:Object.entries(s.domain_distribution).map(([l,i])=>e.jsx(W,{domain:l,count:i},l))})]})]})})}function E({label:t,value:s,color:c,description:a}){return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"obs-label text-[10px] text-[var(--obs-text-tertiary)]",children:t}),e.jsxs("span",{className:"obs-metric text-sm",style:{color:c},children:[(s*100).toFixed(1),"%"]})]}),e.jsx("div",{className:"h-2 bg-[var(--obs-bg-elevated)] rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full transition-all duration-500",style:{width:`${Math.min(100,s*100)}%`,backgroundColor:c,boxShadow:s>.5?`0 0 8px ${c}`:"none"}})}),e.jsx("p",{className:"text-[9px] text-[var(--obs-text-tertiary)] mt-1",children:a})]})}function W({domain:t,count:s}){const a={code:"var(--rsi-practice)",math:"var(--status-nominal)",logic:"var(--rsi-reflect)",planning:"var(--cat-eye-gold)",creative:"var(--rsi-collapse)"}[t]||"var(--obs-text-tertiary)";return e.jsxs("span",{className:"obs-label text-[10px] px-2 py-1 rounded",style:{backgroundColor:`color-mix(in srgb, ${a} 20%, transparent)`,color:a,border:`1px solid ${a}40`},children:[t.toUpperCase(),": ",s]})}function Z(){const{getRSIMetrics:t}=y(),[s,c]=d.useState([]);return d.useEffect(()=>{const a=async()=>{const i=await t();i?.recent_cycles&&c(i.recent_cycles)};a();const l=setInterval(a,5e3);return()=>clearInterval(l)},[t]),e.jsx(f,{title:"CYCLE HISTORY",padding:"md",children:s.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-[var(--obs-bg-elevated)] flex items-center justify-center mb-3",children:e.jsx("span",{className:"text-2xl opacity-30",children:"â—¯"})}),e.jsx("p",{className:"obs-label text-[var(--obs-text-tertiary)]",children:"NO CYCLES RECORDED"}),e.jsx("p",{className:"text-xs text-[var(--obs-text-tertiary)] mt-1 opacity-60",children:"Start an RSI cycle to see history"})]}):e.jsx("div",{className:"overflow-x-auto scrollbar-thin",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-[var(--obs-border)]",children:[e.jsx("th",{className:"obs-label text-[9px] text-left py-2 px-3 text-[var(--obs-text-tertiary)]",children:"CYCLE"}),e.jsx("th",{className:"obs-label text-[9px] text-left py-2 px-3 text-[var(--obs-text-tertiary)]",children:"PHASE"}),e.jsx("th",{className:"obs-label text-[9px] text-left py-2 px-3 text-[var(--obs-text-tertiary)]",children:"DOMAIN"}),e.jsx("th",{className:"obs-label text-[9px] text-left py-2 px-3 text-[var(--obs-text-tertiary)]",children:"DESIRES"}),e.jsx("th",{className:"obs-label text-[9px] text-left py-2 px-3 text-[var(--obs-text-tertiary)]",children:"PRACTICE"}),e.jsx("th",{className:"obs-label text-[9px] text-left py-2 px-3 text-[var(--obs-text-tertiary)]",children:"HEURISTIC"}),e.jsx("th",{className:"obs-label text-[9px] text-left py-2 px-3 text-[var(--obs-text-tertiary)]",children:"TIME"})]})}),e.jsx("tbody",{children:s.map((a,l)=>e.jsx(J,{cycle:a},a.cycle_id||l))})]})})})}function J({cycle:t}){const s=t.phase_reached?`var(--rsi-${t.phase_reached})`:"var(--obs-text-tertiary)";return e.jsxs("tr",{className:"border-b border-[var(--obs-border)]/50 hover:bg-[var(--obs-bg-elevated)] transition-colors",children:[e.jsx("td",{className:"py-2 px-3 font-mono text-xs text-[var(--obs-text-secondary)]",children:t.cycle_id?.split("_").pop()?.slice(-6)||"-"}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("span",{className:"obs-label text-[10px] uppercase",style:{color:s},children:t.phase_reached||"-"})}),e.jsx("td",{className:"py-2 px-3",children:t.domain?e.jsx("span",{className:"obs-label text-[9px] px-2 py-0.5 rounded bg-[var(--obs-bg-elevated)] text-[var(--obs-text-secondary)]",children:t.domain.toUpperCase()}):e.jsx("span",{className:"text-[var(--obs-text-tertiary)]",children:"-"})}),e.jsxs("td",{className:"py-2 px-3",children:[e.jsx("span",{className:"text-[var(--status-nominal)]",children:t.desires_verified||0}),e.jsx("span",{className:"text-[var(--obs-text-tertiary)]",children:"/"}),e.jsx("span",{className:"text-[var(--obs-text-secondary)]",children:t.desires_generated||0})]}),e.jsx("td",{className:"py-2 px-3",children:t.practice_attempted?e.jsx("span",{className:t.practice_succeeded?"text-[var(--status-nominal)]":"text-[var(--status-critical)]",children:t.practice_succeeded?"âœ“":"âœ—"}):e.jsx("span",{className:"text-[var(--obs-text-tertiary)]",children:"-"})}),e.jsx("td",{className:"py-2 px-3",children:t.heuristic_crystallized?e.jsx("span",{className:"text-[var(--rsi-crystallize)]",title:t.heuristic_crystallized,children:"ðŸ’Ž"}):e.jsx("span",{className:"text-[var(--obs-text-tertiary)]",children:"-"})}),e.jsx("td",{className:"py-2 px-3 text-[var(--obs-text-tertiary)] text-xs font-mono",children:K(t.completed_at)})]})}function K(t){return t?new Date(t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"-"}const Q=d.lazy(()=>U(()=>import("./ByrdCatVisualization-CzmJ-Z4u.js"),__vite__mapDeps([0,1])));function se(){const{getRSIStatus:t}=y(),[s,c]=d.useState("idle"),[a,l]=d.useState(!1);return d.useEffect(()=>{const i=async()=>{const p=await t();p&&(c(p.current_phase||"idle"),l(!!p.current_phase))};i();const h=setInterval(i,2e3);return()=>clearInterval(h)},[t]),e.jsxs("div",{className:"min-h-screen bg-[var(--obs-bg-base)] obs-grid-bg animate-fade-in pb-20",children:[e.jsx("div",{className:"px-4 py-4 border-b border-[var(--obs-border)]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h1",{className:"obs-label text-sm tracking-widest text-[var(--obs-text-primary)]",children:"RSI ENGINE"}),e.jsx(R,{status:a?"nominal":"inactive",label:a?"ACTIVE":"STANDBY"})]}),e.jsx("span",{className:"obs-label text-[10px] text-[var(--obs-text-tertiary)]",children:"8-PHASE RECURSIVE SELF-IMPROVEMENT"})]})}),e.jsxs("div",{className:"p-4 space-y-4 lg:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6",children:[e.jsx(f,{title:"PHASE STATUS",status:a?"nominal":"inactive",padding:"lg",children:e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsx(G,{size:280})})}),e.jsx(f,{title:"CONSCIOUSNESS MONITOR",status:a?"nominal":"inactive",padding:"none",children:e.jsxs("div",{className:"relative h-[280px] lg:h-[320px]",children:[e.jsx(d.Suspense,{fallback:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-[var(--data-stream)] border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"obs-label text-[9px] text-[var(--obs-text-tertiary)]",children:"INITIALIZING"})]})}),children:e.jsx(Q,{rsiPhase:s,systemState:a?"running":"stopped",showScanners:a,showParticles:!0,compact:!0,className:"w-full h-full"})}),e.jsx("div",{className:"absolute bottom-3 left-3",children:e.jsx("div",{className:"observatory-panel px-2 py-1",children:e.jsx("span",{className:"obs-label text-xs uppercase",style:{color:`var(--rsi-${s}, var(--obs-text-tertiary))`},children:s})})})]})})]}),e.jsx(X,{currentPhase:s}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6",children:[e.jsx(B,{}),e.jsx(F,{})]}),e.jsx(Z,{})]})]})}function X({currentPhase:t}){const s=[{id:"reflect",name:"Reflect",desc:"Generate improvement desires"},{id:"verify",name:"Verify",desc:"Check emergence validity"},{id:"collapse",name:"Collapse",desc:"Quantum selection"},{id:"route",name:"Route",desc:"Domain classification"},{id:"practice",name:"Practice",desc:"TDD execution"},{id:"record",name:"Record",desc:"Store trajectory"},{id:"crystallize",name:"Crystallize",desc:"Extract heuristics"},{id:"measure",name:"Measure",desc:"Track metrics"}],c=s.findIndex(a=>a.id===t);return e.jsx(f,{title:"PHASE SEQUENCE",padding:"sm",children:e.jsx("div",{className:"flex overflow-x-auto gap-1 pb-2 scrollbar-thin",children:s.map((a,l)=>{const i=a.id===t,h=c>l;return e.jsxs("div",{className:`
                flex-shrink-0 px-3 py-2 rounded transition-all duration-300
                ${i?"observatory-panel":""}
              `,style:{backgroundColor:i?`var(--rsi-${a.id})`:h?`color-mix(in srgb, var(--rsi-${a.id}) 30%, transparent)`:"transparent",borderColor:i?`var(--rsi-${a.id})`:"transparent"},children:[e.jsxs("div",{className:`obs-label text-[10px] ${i?"text-white":"text-[var(--obs-text-tertiary)]"}`,children:[l+1,". ",a.name.toUpperCase()]}),e.jsx("div",{className:`text-[9px] mt-0.5 ${i?"text-white/80":"text-[var(--obs-text-tertiary)]"} hidden sm:block`,children:a.desc})]},a.id)})})})}export{se as RSIPage,se as default};
