import{E as Ve,V as N,M as Z,T as B,S as Me,Q as Pe,e as R,f as qe,P as Qe,h as Je,a as f,i as et,C as tt,k as at,W as st,l as nt,A as ot,D as re,B as rt,m as Te,n as ie,o as it,j as a,c as lt}from"./three-DJcLMhxG.js";import{c as I,a as J,b as ct,A as dt,S as ut}from"./index-CZtG7LeK.js";import{I as mt}from"./info-Cy1_tYuS.js";import"./charts-B4tPbF-_.js";const ht=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],pt=I("bot",ht);const ft=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],xt=I("chevron-down",ft);const bt=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],gt=I("chevron-up",bt);const yt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],wt=I("circle-alert",yt);const jt=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Se=I("refresh-cw",jt);const kt=[["path",{d:"M16.466 7.5C15.643 4.237 13.952 2 12 2 9.239 2 7 6.477 7 12s2.239 10 5 10c.342 0 .677-.069 1-.2",key:"10n0gc"}],["path",{d:"m15.194 13.707 3.814 1.86-1.86 3.814",key:"16shm9"}],["path",{d:"M19 15.57c-1.804.885-4.274 1.43-7 1.43-5.523 0-10-2.239-10-5s4.477-5 10-5c4.838 0 8.873 1.718 9.8 4",key:"1lxi77"}]],Nt=I("rotate-3d",kt);const Et=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Mt=I("send",Et);const Pt=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Tt=I("user",Pt),Re={type:"change"},le={type:"start"},ve={type:"end"},Q=new qe,De=new Qe,St=Math.cos(70*Je.DEG2RAD);class Rt extends Ve{constructor(l,g){super(),this.object=l,this.domElement=g,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new N,this.cursor=new N,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Z.ROTATE,MIDDLE:Z.DOLLY,RIGHT:Z.PAN},this.touches={ONE:B.ROTATE,TWO:B.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return i.phi},this.getAzimuthalAngle=function(){return i.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(t){t.addEventListener("keydown",ne),this._domElementKeyEvents=t},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",ne),this._domElementKeyEvents=null},this.saveState=function(){e.target0.copy(e.target),e.position0.copy(e.object.position),e.zoom0=e.object.zoom},this.reset=function(){e.target.copy(e.target0),e.object.position.copy(e.position0),e.object.zoom=e.zoom0,e.object.updateProjectionMatrix(),e.dispatchEvent(Re),e.update(),r=n.NONE},this.update=(function(){const t=new N,s=new Pe().setFromUnitVectors(l.up,new N(0,1,0)),c=s.clone().invert(),d=new N,w=new Pe,C=new N,T=2*Math.PI;return function(Ge=null){const Ee=e.object.position;t.copy(Ee).sub(e.target),t.applyQuaternion(s),i.setFromVector3(t),e.autoRotate&&r===n.NONE&&y(V(Ge)),e.enableDamping?(i.theta+=u.theta*e.dampingFactor,i.phi+=u.phi*e.dampingFactor):(i.theta+=u.theta,i.phi+=u.phi);let A=e.minAzimuthAngle,L=e.maxAzimuthAngle;isFinite(A)&&isFinite(L)&&(A<-Math.PI?A+=T:A>Math.PI&&(A-=T),L<-Math.PI?L+=T:L>Math.PI&&(L-=T),A<=L?i.theta=Math.max(A,Math.min(L,i.theta)):i.theta=i.theta>(A+L)/2?Math.max(A,i.theta):Math.min(L,i.theta)),i.phi=Math.max(e.minPolarAngle,Math.min(e.maxPolarAngle,i.phi)),i.makeSafe(),e.enableDamping===!0?e.target.addScaledVector(S,e.dampingFactor):e.target.add(S),e.target.sub(e.cursor),e.target.clampLength(e.minTargetRadius,e.maxTargetRadius),e.target.add(e.cursor),e.zoomToCursor&&z||e.object.isOrthographicCamera?i.radius=ae(i.radius):i.radius=ae(i.radius*D),t.setFromSpherical(i),t.applyQuaternion(c),Ee.copy(e.target).add(t),e.object.lookAt(e.target),e.enableDamping===!0?(u.theta*=1-e.dampingFactor,u.phi*=1-e.dampingFactor,S.multiplyScalar(1-e.dampingFactor)):(u.set(0,0,0),S.set(0,0,0));let oe=!1;if(e.zoomToCursor&&z){let $=null;if(e.object.isPerspectiveCamera){const W=t.length();$=ae(W*D);const q=W-$;e.object.position.addScaledVector(_,q),e.object.updateMatrixWorld()}else if(e.object.isOrthographicCamera){const W=new N(P.x,P.y,0);W.unproject(e.object),e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/D)),e.object.updateProjectionMatrix(),oe=!0;const q=new N(P.x,P.y,0);q.unproject(e.object),e.object.position.sub(q).add(W),e.object.updateMatrixWorld(),$=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),e.zoomToCursor=!1;$!==null&&(this.screenSpacePanning?e.target.set(0,0,-1).transformDirection(e.object.matrix).multiplyScalar($).add(e.object.position):(Q.origin.copy(e.object.position),Q.direction.set(0,0,-1).transformDirection(e.object.matrix),Math.abs(e.object.up.dot(Q.direction))<St?l.lookAt(e.target):(De.setFromNormalAndCoplanarPoint(e.object.up,e.target),Q.intersectPlane(De,e.target))))}else e.object.isOrthographicCamera&&(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/D)),e.object.updateProjectionMatrix(),oe=!0);return D=1,z=!1,oe||d.distanceToSquared(e.object.position)>j||8*(1-w.dot(e.object.quaternion))>j||C.distanceToSquared(e.target)>0?(e.dispatchEvent(Re),d.copy(e.object.position),w.copy(e.object.quaternion),C.copy(e.target),!0):!1}})(),this.dispose=function(){e.domElement.removeEventListener("contextmenu",ke),e.domElement.removeEventListener("pointerdown",we),e.domElement.removeEventListener("pointercancel",X),e.domElement.removeEventListener("wheel",je),e.domElement.removeEventListener("pointermove",se),e.domElement.removeEventListener("pointerup",X),e._domElementKeyEvents!==null&&(e._domElementKeyEvents.removeEventListener("keydown",ne),e._domElementKeyEvents=null)};const e=this,n={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let r=n.NONE;const j=1e-6,i=new Me,u=new Me;let D=1;const S=new N,v=new R,O=new R,p=new R,E=new R,M=new R,m=new R,k=new R,x=new R,h=new R,_=new N,P=new R;let z=!1;const b=[],Y={};function V(t){return t!==null?2*Math.PI/60*e.autoRotateSpeed*t:2*Math.PI/60/60*e.autoRotateSpeed}function H(t){const s=Math.abs(t)/(100*(window.devicePixelRatio|0));return Math.pow(.95,e.zoomSpeed*s)}function y(t){u.theta-=t}function K(t){u.phi-=t}const ce=(function(){const t=new N;return function(c,d){t.setFromMatrixColumn(d,0),t.multiplyScalar(-c),S.add(t)}})(),de=(function(){const t=new N;return function(c,d){e.screenSpacePanning===!0?t.setFromMatrixColumn(d,1):(t.setFromMatrixColumn(d,0),t.crossVectors(e.object.up,t)),t.multiplyScalar(c),S.add(t)}})(),F=(function(){const t=new N;return function(c,d){const w=e.domElement;if(e.object.isPerspectiveCamera){const C=e.object.position;t.copy(C).sub(e.target);let T=t.length();T*=Math.tan(e.object.fov/2*Math.PI/180),ce(2*c*T/w.clientHeight,e.object.matrix),de(2*d*T/w.clientHeight,e.object.matrix)}else e.object.isOrthographicCamera?(ce(c*(e.object.right-e.object.left)/e.object.zoom/w.clientWidth,e.object.matrix),de(d*(e.object.top-e.object.bottom)/e.object.zoom/w.clientHeight,e.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),e.enablePan=!1)}})();function ee(t){e.object.isPerspectiveCamera||e.object.isOrthographicCamera?D/=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function ue(t){e.object.isPerspectiveCamera||e.object.isOrthographicCamera?D*=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function te(t,s){if(!e.zoomToCursor)return;z=!0;const c=e.domElement.getBoundingClientRect(),d=t-c.left,w=s-c.top,C=c.width,T=c.height;P.x=d/C*2-1,P.y=-(w/T)*2+1,_.set(P.x,P.y,1).unproject(e.object).sub(e.object.position).normalize()}function ae(t){return Math.max(e.minDistance,Math.min(e.maxDistance,t))}function me(t){v.set(t.clientX,t.clientY)}function Ae(t){te(t.clientX,t.clientX),k.set(t.clientX,t.clientY)}function he(t){E.set(t.clientX,t.clientY)}function Le(t){O.set(t.clientX,t.clientY),p.subVectors(O,v).multiplyScalar(e.rotateSpeed);const s=e.domElement;y(2*Math.PI*p.x/s.clientHeight),K(2*Math.PI*p.y/s.clientHeight),v.copy(O),e.update()}function Ce(t){x.set(t.clientX,t.clientY),h.subVectors(x,k),h.y>0?ee(H(h.y)):h.y<0&&ue(H(h.y)),k.copy(x),e.update()}function Ie(t){M.set(t.clientX,t.clientY),m.subVectors(M,E).multiplyScalar(e.panSpeed),F(m.x,m.y),E.copy(M),e.update()}function _e(t){te(t.clientX,t.clientY),t.deltaY<0?ue(H(t.deltaY)):t.deltaY>0&&ee(H(t.deltaY)),e.update()}function ze(t){let s=!1;switch(t.code){case e.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?K(2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):F(0,e.keyPanSpeed),s=!0;break;case e.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?K(-2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):F(0,-e.keyPanSpeed),s=!0;break;case e.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?y(2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):F(e.keyPanSpeed,0),s=!0;break;case e.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?y(-2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):F(-e.keyPanSpeed,0),s=!0;break}s&&(t.preventDefault(),e.update())}function pe(t){if(b.length===1)v.set(t.pageX,t.pageY);else{const s=U(t),c=.5*(t.pageX+s.x),d=.5*(t.pageY+s.y);v.set(c,d)}}function fe(t){if(b.length===1)E.set(t.pageX,t.pageY);else{const s=U(t),c=.5*(t.pageX+s.x),d=.5*(t.pageY+s.y);E.set(c,d)}}function xe(t){const s=U(t),c=t.pageX-s.x,d=t.pageY-s.y,w=Math.sqrt(c*c+d*d);k.set(0,w)}function Ye(t){e.enableZoom&&xe(t),e.enablePan&&fe(t)}function He(t){e.enableZoom&&xe(t),e.enableRotate&&pe(t)}function be(t){if(b.length==1)O.set(t.pageX,t.pageY);else{const c=U(t),d=.5*(t.pageX+c.x),w=.5*(t.pageY+c.y);O.set(d,w)}p.subVectors(O,v).multiplyScalar(e.rotateSpeed);const s=e.domElement;y(2*Math.PI*p.x/s.clientHeight),K(2*Math.PI*p.y/s.clientHeight),v.copy(O)}function ge(t){if(b.length===1)M.set(t.pageX,t.pageY);else{const s=U(t),c=.5*(t.pageX+s.x),d=.5*(t.pageY+s.y);M.set(c,d)}m.subVectors(M,E).multiplyScalar(e.panSpeed),F(m.x,m.y),E.copy(M)}function ye(t){const s=U(t),c=t.pageX-s.x,d=t.pageY-s.y,w=Math.sqrt(c*c+d*d);x.set(0,w),h.set(0,Math.pow(x.y/k.y,e.zoomSpeed)),ee(h.y),k.copy(x);const C=(t.pageX+s.x)*.5,T=(t.pageY+s.y)*.5;te(C,T)}function Ke(t){e.enableZoom&&ye(t),e.enablePan&&ge(t)}function Fe(t){e.enableZoom&&ye(t),e.enableRotate&&be(t)}function we(t){e.enabled!==!1&&(b.length===0&&(e.domElement.setPointerCapture(t.pointerId),e.domElement.addEventListener("pointermove",se),e.domElement.addEventListener("pointerup",X)),$e(t),t.pointerType==="touch"?Be(t):Ue(t))}function se(t){e.enabled!==!1&&(t.pointerType==="touch"?Xe(t):Ze(t))}function X(t){We(t),b.length===0&&(e.domElement.releasePointerCapture(t.pointerId),e.domElement.removeEventListener("pointermove",se),e.domElement.removeEventListener("pointerup",X)),e.dispatchEvent(ve),r=n.NONE}function Ue(t){let s;switch(t.button){case 0:s=e.mouseButtons.LEFT;break;case 1:s=e.mouseButtons.MIDDLE;break;case 2:s=e.mouseButtons.RIGHT;break;default:s=-1}switch(s){case Z.DOLLY:if(e.enableZoom===!1)return;Ae(t),r=n.DOLLY;break;case Z.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(e.enablePan===!1)return;he(t),r=n.PAN}else{if(e.enableRotate===!1)return;me(t),r=n.ROTATE}break;case Z.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(e.enableRotate===!1)return;me(t),r=n.ROTATE}else{if(e.enablePan===!1)return;he(t),r=n.PAN}break;default:r=n.NONE}r!==n.NONE&&e.dispatchEvent(le)}function Ze(t){switch(r){case n.ROTATE:if(e.enableRotate===!1)return;Le(t);break;case n.DOLLY:if(e.enableZoom===!1)return;Ce(t);break;case n.PAN:if(e.enablePan===!1)return;Ie(t);break}}function je(t){e.enabled===!1||e.enableZoom===!1||r!==n.NONE||(t.preventDefault(),e.dispatchEvent(le),_e(t),e.dispatchEvent(ve))}function ne(t){e.enabled===!1||e.enablePan===!1||ze(t)}function Be(t){switch(Ne(t),b.length){case 1:switch(e.touches.ONE){case B.ROTATE:if(e.enableRotate===!1)return;pe(t),r=n.TOUCH_ROTATE;break;case B.PAN:if(e.enablePan===!1)return;fe(t),r=n.TOUCH_PAN;break;default:r=n.NONE}break;case 2:switch(e.touches.TWO){case B.DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;Ye(t),r=n.TOUCH_DOLLY_PAN;break;case B.DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;He(t),r=n.TOUCH_DOLLY_ROTATE;break;default:r=n.NONE}break;default:r=n.NONE}r!==n.NONE&&e.dispatchEvent(le)}function Xe(t){switch(Ne(t),r){case n.TOUCH_ROTATE:if(e.enableRotate===!1)return;be(t),e.update();break;case n.TOUCH_PAN:if(e.enablePan===!1)return;ge(t),e.update();break;case n.TOUCH_DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;Ke(t),e.update();break;case n.TOUCH_DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;Fe(t),e.update();break;default:r=n.NONE}}function ke(t){e.enabled!==!1&&t.preventDefault()}function $e(t){b.push(t.pointerId)}function We(t){delete Y[t.pointerId];for(let s=0;s<b.length;s++)if(b[s]==t.pointerId){b.splice(s,1);return}}function Ne(t){let s=Y[t.pointerId];s===void 0&&(s=new R,Y[t.pointerId]=s),s.set(t.pageX,t.pageY)}function U(t){const s=t.pointerId===b[0]?b[1]:b[0];return Y[s]}e.domElement.addEventListener("contextmenu",ke),e.domElement.addEventListener("pointerdown",we),e.domElement.addEventListener("pointercancel",X),e.domElement.addEventListener("wheel",je,{passive:!1}),this.update()}}function vt({animationState:o="idle",className:l}){const g=f.useRef(null),e=f.useRef(null),n=f.useRef(null),r=f.useRef(null),j=f.useRef(null),i=f.useRef(null),[u,D]=f.useState(!0),[S,v]=f.useState(!1);f.useEffect(()=>{if(!g.current)return;const p=g.current,E=p.clientWidth,M=p.clientHeight,m=new et;m.background=new tt(16317180),e.current=m;const k=new at(45,E/M,.1,100);k.position.set(0,0,5),n.current=k;const x=new st({antialias:!0,alpha:!0});x.setSize(E,M),x.setPixelRatio(Math.min(window.devicePixelRatio,2)),x.shadowMap.enabled=!0,x.shadowMap.type=nt,p.appendChild(x.domElement),r.current=x;const h=new Rt(k,x.domElement);h.enableDamping=!0,h.dampingFactor=.05,h.enableZoom=!0,h.minDistance=2,h.maxDistance=10,h.enablePan=!1,j.current=h;const _=new ot(16777215,.4);m.add(_);const P=new re(16777215,1);P.position.set(5,5,5),P.castShadow=!0,m.add(P);const z=new re(16777215,.5);z.position.set(-5,3,2),m.add(z);const b=new re(8141549,.8);b.position.set(0,5,-5),m.add(b),O(m),D(!1);let Y;const V=()=>{if(Y=requestAnimationFrame(V),h.update(),i.current){const y=Date.now()*.001;o==="idle"?(i.current.rotation.y=Math.sin(y*.5)*.1,i.current.position.y=Math.sin(y*2)*.05):o==="thinking"?(i.current.rotation.y=y*2,i.current.position.y=Math.sin(y*5)*.1):o==="speaking"&&(i.current.rotation.y=Math.sin(y*3)*.2,i.current.scale.y=1+Math.sin(y*10)*.05)}r.current&&e.current&&n.current&&r.current.render(e.current,n.current)};V();const H=()=>{if(!p||!n.current||!r.current)return;const y=p.clientWidth,K=p.clientHeight;n.current.aspect=y/K,n.current.updateProjectionMatrix(),r.current.setSize(y,K)};return window.addEventListener("resize",H),()=>{window.removeEventListener("resize",H),cancelAnimationFrame(Y),h.dispose(),r.current&&p.contains(r.current.domElement)&&p.removeChild(r.current.domElement),r.current?.dispose()}},[o]),f.useEffect(()=>{if(S){const p=setTimeout(()=>v(!1),5e3);return()=>clearTimeout(p)}},[S]);function O(p){const E=new rt(1,1,1),M=new Te({color:8141549,metalness:.3,roughness:.4}),m=new ie(E,M);m.position.set(0,0,0),p.add(m),i.current=m;const k=new it(.1,16,16),x=new Te({color:16777215,emissive:8141549,emissiveIntensity:.5}),h=new ie(k,x);h.position.set(-.2,.1,.5),m.add(h);const _=new ie(k,x);_.position.set(.2,.1,.5),m.add(_)}return a.jsxs("div",{ref:g,className:J("relative w-full h-full bg-gradient-to-b from-slate-50 to-white dark:from-slate-900 dark:to-slate-800",l),children:[u&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-100 dark:bg-slate-800",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}),!u&&a.jsxs("div",{className:"absolute top-4 right-4 flex gap-2 z-10",children:[a.jsx("button",{onClick:()=>v(!S),className:"p-2 bg-white dark:bg-slate-700 rounded-lg shadow-lg hover:shadow-xl transition-shadow focus:outline-none focus:ring-2 focus:ring-purple-500",title:"Show controls info","aria-label":"Show controls info",children:a.jsx(mt,{className:"w-5 h-5 text-slate-700 dark:text-slate-200"})}),a.jsx("button",{onClick:()=>{n.current&&j.current&&(n.current.position.set(0,0,5),j.current.target.set(0,0,0))},className:"p-2 bg-white dark:bg-slate-700 rounded-lg shadow-lg hover:shadow-xl transition-shadow focus:outline-none focus:ring-2 focus:ring-purple-500",title:"Reset view","aria-label":"Reset camera view",children:a.jsx(Nt,{className:"w-5 h-5 text-slate-700 dark:text-slate-200"})})]}),S&&!u&&a.jsx("div",{className:"absolute top-4 left-4 z-10 max-w-xs",children:a.jsxs("div",{className:"bg-white/90 dark:bg-slate-800/90 backdrop-blur-sm rounded-lg shadow-lg p-3 text-xs space-y-2",children:[a.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Controls"}),a.jsxs("div",{className:"space-y-1 text-slate-600 dark:text-slate-400",children:[a.jsxs("p",{children:["ðŸ–±ï¸ ",a.jsx("strong",{children:"Drag"})," to rotate"]}),a.jsxs("p",{children:["ðŸ¤ ",a.jsx("strong",{children:"Pinch"})," to zoom"]}),a.jsxs("p",{children:["âœ‹ ",a.jsx("strong",{children:"Two-finger"})," to pan (disabled)"]})]}),a.jsx("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-700",children:a.jsx("p",{className:"text-[10px] text-slate-500 dark:text-slate-500",children:"Current: Procedural avatar (cat.glb coming soon)"})})]})})]})}function Dt(){const[o,l]=f.useState(!0);return a.jsxs("div",{className:"px-4 py-2 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700",children:[!o&&a.jsxs("button",{onClick:()=>l(!0),className:"w-full flex items-center justify-between text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Se,{className:"w-4 h-4 text-purple-600 dark:text-purple-400 animate-spin"}),a.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:"Phase 3: PRACTICE"})]}),a.jsx(xt,{className:"w-4 h-4 text-slate-400"})]}),o&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Se,{className:"w-4 h-4 text-purple-600 dark:text-purple-400 animate-spin-slow"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:"ðŸ”„ RSI Cycle #28"}),a.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Phase 3: PRACTICE â€¢ 2m 34s remaining"})]})]}),a.jsx("button",{onClick:()=>l(!1),className:"p-1 hover:bg-slate-100 dark:hover:bg-slate-700 rounded transition-colors",children:a.jsx(gt,{className:"w-4 h-4 text-slate-400"})})]}),a.jsxs("div",{className:"flex gap-4 text-xs",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Emergence:"}),a.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:"0.847 â†‘"})]}),a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Treasury:"}),a.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:"$12.4K"})]})]})]})]})}const Oe=lt(o=>({byrdState:null,messages:[],animationState:"idle",isTyping:!1,setByrdState:l=>o({byrdState:l}),setAnimationState:l=>o({animationState:l}),addMessage:l=>o(g=>({messages:[...g.messages,l]})),clearMessages:()=>o({messages:[]}),setTyping:l=>o({isTyping:l})}));function Ot(o){const l=new Date(o),e=new Date().getTime()-l.getTime(),n=Math.floor(e/1e3),r=Math.floor(n/60),j=Math.floor(r/60),i=Math.floor(j/24);return n<60?"just now":r<60?`${r}m ago`:j<24?`${j}h ago`:i<7?`${i}d ago`:l.toLocaleDateString()}function At({message:o}){const l=o.type==="user";return o.type==="system"?a.jsx("div",{className:"flex justify-center animate-fade-in",children:a.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-amber-100 dark:bg-amber-900/30 rounded-full",children:[a.jsx(wt,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"}),a.jsx("span",{className:"text-sm font-medium text-amber-900 dark:text-amber-100",children:o.content})]})}):a.jsx("div",{className:G("flex",l?"justify-end":"justify-start","animate-slide-up"),children:a.jsxs("div",{className:G("flex gap-3 max-w-[85%]",l?"flex-row-reverse":"flex-row"),children:[a.jsx("div",{className:G("flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center",l?"bg-blue-600 text-white":"bg-purple-600 dark:bg-purple-500 text-white"),children:l?a.jsx(Tt,{className:"w-5 h-5"}):a.jsx(pt,{className:"w-5 h-5"})}),a.jsxs("div",{className:G("flex flex-col",l?"items-end":"items-start"),children:[a.jsx("div",{className:G("px-4 py-2.5 rounded-2xl text-sm leading-relaxed",l?"bg-blue-600 text-white rounded-br-sm":"bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 border border-slate-200 dark:border-slate-700 rounded-bl-sm"),children:o.content}),a.jsx("span",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1 px-1",children:Ot(o.timestamp)})]})]})})}function G(...o){return o.filter(Boolean).join(" ")}function Lt(){return a.jsx("div",{className:"flex justify-start animate-slide-up",children:a.jsxs("div",{className:"flex gap-3 max-w-[85%]",children:[a.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 dark:bg-purple-500 flex items-center justify-center",children:a.jsx("span",{className:"text-sm",children:"ðŸ¦"})}),a.jsx("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 px-4 py-3 rounded-2xl rounded-bl-sm",children:a.jsx("div",{className:"flex gap-1.5",children:[0,1,2].map(o=>a.jsx("span",{className:"w-2 h-2 bg-slate-400 dark:bg-slate-500 rounded-full animate-pulse",style:{animationDelay:`${o*.15}s`,animationDuration:"0.8s"}},o))})})]})})}function Ct(){const{messages:o,isTyping:l}=Oe(),g=f.useRef(null),e=f.useRef(o.length);return f.useEffect(()=>{o.length>e.current&&g.current?.scrollTo({top:g.current.scrollHeight,behavior:"smooth"}),e.current=o.length},[o.length]),a.jsxs("div",{ref:g,className:"flex-1 overflow-y-auto px-4 py-4 space-y-4",children:[o.length===0&&a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center space-y-4",children:[a.jsx("div",{className:"w-16 h-16 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-3xl",children:"ðŸ¦"})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Start a conversation with BYRD"}),a.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 max-w-xs",children:"Ask about RSI cycles, set priorities, or inject new desires"})]})]}),o.map(n=>a.jsx(At,{message:n},n.id)),l&&a.jsx(Lt,{})]})}function It(){const[o,l]=f.useState(""),[g,e]=f.useState(!1),n=f.useRef(null),{addMessage:r,isTyping:j}=Oe();f.useEffect(()=>{const u=n.current;u&&(u.style.height="auto",u.style.height=`${Math.min(u.scrollHeight,200)}px`)},[o]);const i=async u=>{u.preventDefault(),!(!o.trim()||j)&&(r({id:`msg_${Date.now()}`,type:"user",content:o.trim(),timestamp:new Date().toISOString()}),l(""),setTimeout(()=>{r({id:`msg_${Date.now()}_response`,type:"byrd",content:"I received your message. Processing...",timestamp:new Date().toISOString()})},1e3))};return a.jsx("form",{onSubmit:i,className:J("flex-shrink-0 bg-white dark:bg-slate-900 border-t border-slate-200 dark:border-slate-700 p-4",g&&"shadow-lg"),children:a.jsxs("div",{className:"flex items-end gap-2 max-w-4xl mx-auto",children:[a.jsx("div",{className:"flex-1 relative",children:a.jsx("textarea",{ref:n,value:o,onChange:u=>l(u.target.value),onFocus:()=>e(!0),onBlur:()=>e(!1),placeholder:"Type to BYRD...",rows:1,className:J("w-full px-4 py-3 pr-2 rounded-xl resize-none","bg-slate-100 dark:bg-slate-800","border border-transparent","focus:bg-white dark:focus:bg-slate-700","focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20","text-slate-900 dark:text-slate-100 placeholder-slate-400","transition-all duration-200","max-h-48 overflow-y-auto"),disabled:j})}),a.jsx("button",{type:"submit",disabled:!o.trim()||j,className:J("p-3 rounded-xl transition-all duration-200","bg-purple-600 hover:bg-purple-700 text-white","disabled:bg-slate-300 dark:disabled:bg-slate-700 disabled:cursor-not-allowed","active:scale-95"),children:a.jsx(Mt,{className:"w-5 h-5"})})]})})}function Ft(){const o=ct();return a.jsxs("div",{className:"flex flex-col h-screen bg-slate-50 dark:bg-slate-900",children:[a.jsx("header",{className:"flex-shrink-0 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-4 py-3",children:a.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[a.jsx("button",{onClick:()=>o(-1),className:"p-2 -ml-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors","aria-label":"Go back",children:a.jsx(dt,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"})}),a.jsx("h1",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"BYRD"}),a.jsx("button",{className:"p-2 -mr-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors","aria-label":"Settings",children:a.jsx(ut,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"})})]})}),a.jsx("div",{className:"flex-shrink-0 h-[45vh] min-h-[320px] max-h-[600px] relative",children:a.jsx(vt,{modelPath:"/models/cat.glb",animationState:"idle",autoRotate:!1,className:"w-full h-full"})}),a.jsx(Dt,{}),a.jsx("div",{className:"flex-1 min-h-0 bg-white dark:bg-slate-800",children:a.jsx(Ct,{})}),a.jsx(It,{})]})}export{Ft as ByrdChatPage};
