import{j as t,C as v,a as u,O as R,u as b,M,e as x,f as E}from"./three-CwL82Xzi.js";const h={idle:"#64748b",reflect:"#8b5cf6",verify:"#6366f1",collapse:"#ec4899",route:"#f59e0b",practice:"#10b981",record:"#3b82f6",crystallize:"#06b6d4",measure:"#84cc16"},I=(e,s)=>e==="stopped"||e==="idle"?.4:s==="collapse"?1.2:e==="running"?.8:.6;function C({rsiPhase:e,systemState:s}){const n=u.useRef(null),a=u.useRef([]),{scene:i}=b("/models/cat.glb"),c=u.useMemo(()=>{const r=i.clone(!0),o=new M({color:657930,roughness:.85,metalness:.05}),f=h[e]||h.idle,m=new M({color:f,emissive:f,emissiveIntensity:.8,roughness:.2,metalness:.3});return a.current=[],r.traverse(d=>{if(d.isMesh){const l=d;l.castShadow=!0,l.receiveShadow=!0;const g=l.name.toLowerCase();g.includes("eye")&&!g.includes("lid")?(l.material=m.clone(),a.current.push(l)):l.material=o.clone()}}),r.scale.set(3,2.4,2.8),r},[i,e]);return u.useEffect(()=>{const r=h[e]||h.idle;a.current.forEach(o=>{const f=o.material;f&&(f.color.set(r),f.emissive.set(r))})},[e]),x(r=>{if(!n.current)return;const o=r.clock.getElapsedTime(),f=s==="dreaming"?.3:.5,m=s==="dreaming"?.02:.015,d=Math.sin(o*f*Math.PI*2);n.current.scale.y=2.4+d*m,n.current.scale.x=3+d*m*.3;const l=o*.3;n.current.rotation.y=Math.sin(l)*.02,n.current.rotation.z=Math.sin(l*.7)*.008;const j=I(s,e)+Math.sin(o*.5)*.2;a.current.forEach(y=>{const p=y.material;p&&p.emissiveIntensity!==void 0&&(p.emissiveIntensity+=(j-p.emissiveIntensity)*.02)})}),t.jsx("group",{ref:n,position:[0,0,0],children:t.jsx("primitive",{object:c})})}function w({active:e}){const s=u.useRef(null);return x(n=>{!s.current||!e||(s.current.rotation.y=n.clock.getElapsedTime()*.3,s.current.rotation.x=Math.sin(n.clock.getElapsedTime()*.2)*.1)}),e?t.jsx("group",{ref:s,children:[0,1,2].map(n=>t.jsxs("mesh",{rotation:[Math.PI/2+n*.3,0,n*(Math.PI/3)],children:[t.jsx("torusGeometry",{args:[2.5+n*.3,.01,16,64]}),t.jsx("meshBasicMaterial",{color:"#00ffff",transparent:!0,opacity:.3-n*.08})]},n))}):null}function k(){const e=u.useRef(null),s=u.useMemo(()=>{const a=new Float32Array(450);for(let i=0;i<150;i++){const c=3+Math.random()*10,r=Math.random()*Math.PI*2,o=Math.acos(2*Math.random()-1);a[i*3]=c*Math.sin(o)*Math.cos(r),a[i*3+1]=c*Math.sin(o)*Math.sin(r),a[i*3+2]=c*Math.cos(o)}return a},[]);return x(n=>{e.current&&(e.current.rotation.y=n.clock.getElapsedTime()*.01)}),t.jsxs("points",{ref:e,children:[t.jsx("bufferGeometry",{children:t.jsx("bufferAttribute",{attach:"attributes-position",args:[s,3]})}),t.jsx("pointsMaterial",{size:.02,color:"#00ffff",transparent:!0,opacity:.15,sizeAttenuation:!0})]})}function A(){const{camera:e}=E();return u.useEffect(()=>{e.position.set(0,2,6),e.lookAt(0,.5,0)},[e]),null}function S({rsiPhase:e="idle",systemState:s="stopped",showScanners:n=!0,showParticles:a=!0,className:i="",compact:c=!1}){const r=s==="running"||s==="dreaming";return t.jsxs("div",{className:`relative ${i}`,children:[t.jsxs(v,{shadows:!0,camera:{position:c?[0,1.5,4]:[0,2,6],fov:c?50:45},style:{background:"transparent"},children:[t.jsx("ambientLight",{intensity:.4}),t.jsx("directionalLight",{position:[5,10,5],intensity:.8,castShadow:!0,"shadow-mapSize":[1024,1024]}),t.jsx("directionalLight",{position:[-5,5,-5],intensity:.3}),t.jsx("pointLight",{position:[0,1,1],intensity:r?.5:.2,color:h[e]||"#64748b",distance:5}),t.jsxs(u.Suspense,{fallback:null,children:[t.jsx(C,{rsiPhase:e,systemState:s}),n&&t.jsx(w,{active:r}),a&&t.jsx(k,{})]}),t.jsx(A,{}),t.jsx(R,{enableDamping:!0,dampingFactor:.05,minDistance:c?2:3,maxDistance:c?8:15,target:[0,.5,0],autoRotate:!0,autoRotateSpeed:.3,enablePan:!1})]}),t.jsx("div",{className:"absolute inset-0 pointer-events-none obs-vignette"})]})}b.preload("/models/cat.glb");export{S as ByrdCatVisualization,S as default};
