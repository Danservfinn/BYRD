import{a as c,j as e}from"./three-D8wphWKn.js";import{G as x}from"./GlassPanel-Crt5WUrk.js";import{u as m}from"./useByrdAPI-CtTLMCNh.js";import{c as h}from"./charts-DXygg0Z3.js";const f=[{id:"reflect",name:"Reflect",icon:"ðŸ”®",description:"Generate improvement desires"},{id:"verify",name:"Verify",icon:"âœ“",description:"Check emergence validity"},{id:"collapse",name:"Collapse",icon:"ðŸŽ²",description:"Quantum selection"},{id:"route",name:"Route",icon:"ðŸ”€",description:"Domain classification"},{id:"practice",name:"Practice",icon:"ðŸŽ¯",description:"TDD execution"},{id:"record",name:"Record",icon:"ðŸ“",description:"Store trajectory"},{id:"crystallize",name:"Crystallize",icon:"ðŸ’Ž",description:"Extract heuristics"},{id:"measure",name:"Measure",icon:"ðŸ“Š",description:"Track metrics"}],p={reflect:"var(--rsi-reflect)",verify:"var(--rsi-verify)",collapse:"var(--rsi-collapse)",route:"var(--rsi-route)",practice:"var(--rsi-practice)",record:"var(--rsi-record)",crystallize:"var(--rsi-crystallize)",measure:"var(--rsi-measure)"};function j(){const{getRSIStatus:t}=m(),[s,i]=c.useState(null),[a,l]=c.useState([]);return c.useEffect(()=>{const r=async()=>{const d=await t();d&&(i(d.current_phase||null),l(d.completed_phases||[]))};r();const n=setInterval(r,2e3);return()=>clearInterval(n)},[t]),e.jsxs(x,{glow:"blue",padding:"lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Phase Tracker"}),e.jsx("span",{className:"text-sm text-slate-500",children:s?`Active: ${s}`:"Idle"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-8 left-0 right-0 h-1 bg-slate-200 dark:bg-slate-700 rounded"}),e.jsx("div",{className:"absolute top-8 left-0 h-1 bg-gradient-to-r from-purple-500 via-blue-500 to-green-500 rounded transition-all duration-500",style:{width:`${a.length/f.length*100}%`}}),e.jsx("div",{className:"relative flex justify-between",children:f.map(r=>{const n=s===r.id,d=a.includes(r.id),g=!n&&!d;return e.jsxs("div",{className:"flex flex-col items-center w-20",children:[e.jsx("div",{className:h("w-16 h-16 rounded-full flex items-center justify-center text-2xl transition-all duration-300",n&&"ring-4 ring-offset-2 ring-offset-white dark:ring-offset-slate-900 animate-pulse",d&&"scale-90",g&&"opacity-40"),style:{backgroundColor:d||n?p[r.id]:"rgba(100, 116, 139, 0.2)",boxShadow:n?`0 0 20px ${p[r.id]}`:"none","--tw-ring-color":n?p[r.id]:void 0},children:d?"âœ“":r.icon}),e.jsx("span",{className:h("mt-3 text-xs font-medium text-center",n?"text-slate-900 dark:text-slate-100":"text-slate-500"),children:r.name}),e.jsx("span",{className:"text-xs text-slate-400 text-center mt-1 hidden lg:block",children:r.description})]},r.id)})})]})]})}function b(){const{getRalphLoopStatus:t}=m(),[s,i]=c.useState(null);return c.useEffect(()=>{const a=async()=>{const r=await t();r&&i(r)};a();const l=setInterval(a,3e3);return()=>clearInterval(l)},[t]),e.jsxs(x,{glow:"purple",padding:"lg",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Ralph Loop"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`w-3 h-3 rounded-full ${s?.running?"bg-green-500 animate-pulse":"bg-slate-400"}`}),e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:s?.running?"Running":"Stopped"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(o,{label:"Iterations",value:s?.iterations_completed||0}),e.jsx(o,{label:"Total Time",value:v(s?.total_time_seconds||0)}),e.jsx(o,{label:"Tokens Used",value:N(s?.total_tokens||0)}),e.jsx(o,{label:"Cost",value:`$${(s?.total_cost_usd||0).toFixed(2)}`})]}),e.jsxs("div",{className:"pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-slate-500",children:"Emergence Confidence"}),e.jsxs("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:[((s?.last_emergence?.confidence||0)*100).toFixed(1),"%"]})]}),e.jsx("div",{className:"h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all duration-500",style:{width:`${(s?.last_emergence?.confidence||0)*100}%`}})})]}),s?.terminated&&e.jsxs("div",{className:"pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"text-xs text-slate-500 uppercase tracking-wide",children:"Termination Reason"}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 mt-1",children:y(s?.reason)})]})]})]})}function o({label:t,value:s}){return e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500 uppercase tracking-wide",children:t}),e.jsx("div",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:s})]})}function v(t){return t<60?`${Math.floor(t)}s`:t<3600?`${Math.floor(t/60)}m ${Math.floor(t%60)}s`:`${Math.floor(t/3600)}h ${Math.floor(t%3600/60)}m`}function N(t){return t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}K`:t.toString()}function y(t){return{emergence_detected:"Genuine emergence detected",max_iterations:"Maximum iterations reached",max_cost:"Cost limit exceeded",max_time:"Time limit exceeded",error:"Error occurred",manual_stop:"Manually stopped"}[t]||t}function k(){const{getRSIMetrics:t}=m(),[s,i]=c.useState(null);c.useEffect(()=>{const l=async()=>{const n=await t();n&&i(n)};l();const r=setInterval(l,5e3);return()=>clearInterval(r)},[t]);const a=s?.rsi_metrics||{};return e.jsxs(x,{glow:"green",padding:"lg",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Emergence Metrics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(u,{label:"Activation Rate",value:a.activation_rate||0,color:"green",description:"Rate of emergent desire activation"}),e.jsx(u,{label:"Trajectory Success",value:a.trajectory_success_rate||0,color:"blue",description:"Practice trajectory success rate"}),e.jsx(u,{label:"Direction Variance",value:Math.min(1,(a.direction_variance||0)*2),color:"amber",description:"Diversity of improvement directions"}),e.jsx("div",{className:"pt-4 border-t border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:a.emergent_desires||0}),e.jsx("div",{className:"text-xs text-slate-500",children:"Desires"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:a.trajectories_stored||0}),e.jsx("div",{className:"text-xs text-slate-500",children:"Trajectories"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:a.heuristics_crystallized||0}),e.jsx("div",{className:"text-xs text-slate-500",children:"Heuristics"})]})]})}),a.domain_distribution&&Object.keys(a.domain_distribution).length>0&&e.jsxs("div",{className:"pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"text-xs text-slate-500 uppercase tracking-wide",children:"Domain Distribution"}),e.jsx("div",{className:"flex gap-2 mt-2 flex-wrap",children:Object.entries(a.domain_distribution).map(([l,r])=>e.jsx(_,{domain:l,count:r},l))})]})]})]})}function u({label:t,value:s,color:i,description:a}){const l={green:"from-green-400 to-green-600",blue:"from-blue-400 to-blue-600",amber:"from-amber-400 to-amber-600",purple:"from-purple-400 to-purple-600"};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:t}),e.jsxs("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:[(s*100).toFixed(1),"%"]})]}),e.jsx("div",{className:"h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full bg-gradient-to-r ${l[i]} transition-all duration-500`,style:{width:`${Math.min(100,s*100)}%`}})}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:a})]})}function _({domain:t,count:s}){const i={code:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",math:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",logic:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400",planning:"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400",creative:"bg-pink-100 text-pink-700 dark:bg-pink-900/30 dark:text-pink-400"};return e.jsxs("span",{className:`px-2 py-1 rounded text-xs font-medium ${i[t]||"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-400"}`,children:[t,": ",s]})}function w(){const{getRSIMetrics:t}=m(),[s,i]=c.useState([]);return c.useEffect(()=>{const a=async()=>{const r=await t();r?.recent_cycles&&i(r.recent_cycles)};a();const l=setInterval(a,5e3);return()=>clearInterval(l)},[t]),e.jsxs(x,{glow:"none",padding:"lg",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Cycle History"}),s.length===0?e.jsx("div",{className:"text-center py-8 text-slate-400",children:"No cycles recorded yet."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[e.jsx("th",{className:"text-left py-2 px-3 text-slate-500 font-medium",children:"Cycle"}),e.jsx("th",{className:"text-left py-2 px-3 text-slate-500 font-medium",children:"Phase Reached"}),e.jsx("th",{className:"text-left py-2 px-3 text-slate-500 font-medium",children:"Domain"}),e.jsx("th",{className:"text-left py-2 px-3 text-slate-500 font-medium",children:"Desires"}),e.jsx("th",{className:"text-left py-2 px-3 text-slate-500 font-medium",children:"Practice"}),e.jsx("th",{className:"text-left py-2 px-3 text-slate-500 font-medium",children:"Heuristic"}),e.jsx("th",{className:"text-left py-2 px-3 text-slate-500 font-medium",children:"Time"})]})}),e.jsx("tbody",{children:s.map((a,l)=>e.jsx(S,{cycle:a},a.cycle_id||l))})]})})]})}function S({cycle:t}){const s={reflect:"text-purple-600",verify:"text-indigo-600",collapse:"text-pink-600",route:"text-amber-600",practice:"text-green-600",record:"text-blue-600",crystallize:"text-cyan-600",measure:"text-lime-600"};return e.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800/50",children:[e.jsx("td",{className:"py-2 px-3 font-mono text-xs",children:t.cycle_id?.split("_").pop()||"-"}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("span",{className:h("font-medium capitalize",s[t.phase_reached]||"text-slate-600"),children:t.phase_reached||"-"})}),e.jsx("td",{className:"py-2 px-3",children:t.domain?e.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-slate-100 dark:bg-slate-800",children:t.domain}):e.jsx("span",{className:"text-slate-400",children:"-"})}),e.jsxs("td",{className:"py-2 px-3",children:[e.jsx("span",{className:"text-green-600",children:t.desires_verified||0}),e.jsx("span",{className:"text-slate-400",children:"/"}),e.jsx("span",{className:"text-slate-600",children:t.desires_generated||0})]}),e.jsx("td",{className:"py-2 px-3",children:t.practice_attempted?e.jsx("span",{className:t.practice_succeeded?"text-green-600":"text-red-500",children:t.practice_succeeded?"âœ“":"âœ—"}):e.jsx("span",{className:"text-slate-400",children:"-"})}),e.jsx("td",{className:"py-2 px-3",children:t.heuristic_crystallized?e.jsx("span",{className:"text-cyan-600",title:t.heuristic_crystallized,children:"ðŸ’Ž"}):e.jsx("span",{className:"text-slate-400",children:"-"})}),e.jsx("td",{className:"py-2 px-3 text-slate-500 text-xs",children:C(t.completed_at)})]})}function C(t){return t?new Date(t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"-"}function P(){return e.jsxs("div",{className:"space-y-4 lg:space-y-6 animate-fade-in pb-20",children:[e.jsxs("div",{className:"px-4",children:[e.jsx("h1",{className:"text-xl lg:text-2xl font-bold text-slate-900 dark:text-slate-100",children:"RSI Engine"}),e.jsx("p",{className:"text-xs lg:text-sm text-slate-500 dark:text-slate-400",children:"8-Phase Recursive Self-Improvement Cycle"})]}),e.jsx("div",{className:"px-4",children:e.jsx(j,{})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6 px-4",children:[e.jsx(b,{}),e.jsx(k,{})]}),e.jsx("div",{className:"px-4",children:e.jsx(w,{})})]})}export{P as RSIPage};
