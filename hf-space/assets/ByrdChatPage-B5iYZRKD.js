const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ByrdCatVisualization-CzmJ-Z4u.js","assets/three-CwL82Xzi.js"])))=>i.map(i=>d[i]);
import{a as l,j as e,c as S,_ as I}from"./three-CwL82Xzi.js";import{c as u,u as j,a as p,b as k,A as R,S as _,d as C}from"./index-DRYyjZ-u.js";import{C as M}from"./circle-alert-Dr3SVW_p.js";import"./charts-Cw4TBZXl.js";const E=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],D=u("bot",E);const T=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],A=u("chevron-down",T);const $=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],B=u("chevron-up",$);const P=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],O=u("send",P);const L=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],U=u("user",L);function Y(){const[s,t]=l.useState(!0),{getRSIStatus:n,getRalphLoopStatus:i}=j(),[a,c]=l.useState(null),[o,d]=l.useState(0),[r,N]=l.useState(0),[b]=l.useState(0);l.useEffect(()=>{const g=async()=>{try{const x=await n();x&&(c(x.current_phase||null),d(x.completed_phases?.length||0));const y=await i();y&&N(y.last_emergence?.confidence||0)}catch(x){console.error("Status fetch failed:",x)}};g();const w=setInterval(g,5e3);return()=>clearInterval(w)},[n,i]);const h=a?`var(--rsi-${a})`:"var(--obs-text-tertiary)";return e.jsxs("div",{className:"px-4 py-2 bg-[var(--obs-bg-elevated)] border-b border-[var(--obs-border)]",children:[!s&&e.jsxs("button",{onClick:()=>t(!0),className:"w-full flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-2 h-2 rounded-full animate-status-beacon",style:{backgroundColor:a?h:"var(--obs-text-tertiary)"}}),e.jsx("span",{className:"obs-label text-[11px] text-[var(--obs-text-secondary)]",children:a?`PHASE: ${a.toUpperCase()}`:"STANDBY"})]}),e.jsx(A,{className:"w-4 h-4 text-[var(--obs-text-tertiary)]"})]}),s&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-2 h-2 rounded-full animate-status-beacon",style:{backgroundColor:a?h:"var(--obs-text-tertiary)"}}),e.jsxs("div",{children:[e.jsxs("p",{className:"obs-label text-[11px] text-[var(--obs-text-primary)]",children:["RSI CYCLE #",o]}),e.jsx("p",{className:"text-[10px] text-[var(--obs-text-tertiary)]",children:a?e.jsxs(e.Fragment,{children:["Phase:"," ",e.jsx("span",{style:{color:h},children:a.toUpperCase()})]}):"Awaiting cycle start"})]})]}),e.jsx("button",{onClick:()=>t(!1),className:"p-1 hover:bg-[var(--obs-bg-surface)] rounded transition-colors",children:e.jsx(B,{className:"w-4 h-4 text-[var(--obs-text-tertiary)]"})})]}),e.jsxs("div",{className:"flex gap-6 text-[10px]",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"obs-label text-[var(--obs-text-tertiary)]",children:"EMERGENCE:"}),e.jsxs("span",{className:"obs-metric",style:{color:"var(--cat-eye-gold)"},children:[(r*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"obs-label text-[var(--obs-text-tertiary)]",children:"TREASURY:"}),e.jsxs("span",{className:"obs-metric",style:{color:"var(--status-nominal)"},children:["$",b>1e3?`${(b/1e3).toFixed(1)}K`:b.toFixed(0)]})]})]}),e.jsx("div",{className:"h-1 bg-[var(--obs-bg-surface)] rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full transition-all duration-500",style:{width:`${r*100}%`,background:"linear-gradient(90deg, var(--data-stream), var(--cat-eye-gold))"}})})]})]})}const v=S(s=>({byrdState:null,messages:[],animationState:"idle",isTyping:!1,setByrdState:t=>s({byrdState:t}),setAnimationState:t=>s({animationState:t}),addMessage:t=>s(n=>({messages:[...n.messages,t]})),clearMessages:()=>s({messages:[]}),setTyping:t=>s({isTyping:t})}));function z(s){const t=new Date(s),i=new Date().getTime()-t.getTime(),a=Math.floor(i/1e3),c=Math.floor(a/60),o=Math.floor(c/60),d=Math.floor(o/24);return a<60?"just now":c<60?`${c}m ago`:o<24?`${o}h ago`:d<7?`${d}d ago`:t.toLocaleDateString()}function F({message:s}){const t=s.type==="user";return s.type==="system"?e.jsx("div",{className:"flex justify-center animate-fade-in",children:e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 observatory-panel rounded-full",children:[e.jsx(M,{className:"w-4 h-4 text-[var(--status-caution)]"}),e.jsx("span",{className:"obs-label text-[10px] text-[var(--status-caution)]",children:s.content})]})}):e.jsx("div",{className:m("flex",t?"justify-end":"justify-start","animate-slide-up"),children:e.jsxs("div",{className:m("flex gap-3 max-w-[85%]",t?"flex-row-reverse":"flex-row"),children:[e.jsx("div",{className:m("flex-shrink-0 w-8 h-8 rounded flex items-center justify-center",t?"bg-[var(--data-stream)] text-[var(--obs-bg-base)]":"observatory-panel text-[var(--cat-eye-gold)]"),children:t?e.jsx(U,{className:"w-4 h-4"}):e.jsx(D,{className:"w-4 h-4"})}),e.jsxs("div",{className:m("flex flex-col",t?"items-end":"items-start"),children:[e.jsx("span",{className:"obs-label text-[8px] text-[var(--obs-text-tertiary)] mb-1 px-1",children:t?"OPERATOR":"BYRD"}),e.jsx("div",{className:m("px-4 py-3 rounded text-sm leading-relaxed",t?"bg-[var(--data-stream)] text-[var(--obs-bg-base)]":"observatory-panel text-[var(--obs-text-primary)]"),children:s.content}),e.jsx("span",{className:"obs-label text-[8px] text-[var(--obs-text-tertiary)] mt-1 px-1",children:z(s.timestamp)})]})]})})}function m(...s){return s.filter(Boolean).join(" ")}function H(){return e.jsx("div",{className:"flex justify-start animate-slide-up",children:e.jsxs("div",{className:"flex gap-3 max-w-[85%]",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 dark:bg-purple-500 flex items-center justify-center",children:e.jsx("span",{className:"text-sm",children:"ðŸ¦"})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 px-4 py-3 rounded-2xl rounded-bl-sm",children:e.jsx("div",{className:"flex gap-1.5",children:[0,1,2].map(s=>e.jsx("span",{className:"w-2 h-2 bg-slate-400 dark:bg-slate-500 rounded-full animate-pulse",style:{animationDelay:`${s*.15}s`,animationDuration:"0.8s"}},s))})})]})})}function G(){const{messages:s,isTyping:t}=v(),n=l.useRef(null),i=l.useRef(s.length);return l.useEffect(()=>{s.length>i.current&&n.current?.scrollTo({top:n.current.scrollHeight,behavior:"smooth"}),i.current=s.length},[s.length]),e.jsxs("div",{ref:n,className:"flex-1 overflow-y-auto px-4 py-4 space-y-4 scrollbar-thin",children:[s.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 observatory-panel rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-3xl animate-eye-glow",style:{textShadow:"0 0 20px var(--cat-eye-gold)"},children:"ðŸ±"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"obs-label text-sm text-[var(--obs-text-primary)]",children:"COMMUNICATION TERMINAL"}),e.jsxs("p",{className:"text-xs text-[var(--obs-text-tertiary)] max-w-xs",children:["Direct interface to BYRD's consciousness.",e.jsx("br",{}),"Ask about RSI cycles, set priorities, or inject new desires."]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-center max-w-sm",children:[e.jsx(f,{text:"What's your current state?"}),e.jsx(f,{text:"Show emergence metrics"}),e.jsx(f,{text:"Start RSI cycle"})]})]}),s.map(a=>e.jsx(F,{message:a},a.id)),t&&e.jsx(H,{})]})}function f({text:s}){const{addMessage:t}=v(),n=()=>{t({id:`msg_${Date.now()}`,type:"user",content:s,timestamp:new Date().toISOString()})};return e.jsx("button",{onClick:n,className:"obs-label text-[9px] px-3 py-1.5 rounded bg-[var(--obs-bg-elevated)] text-[var(--obs-text-secondary)] border border-[var(--obs-border)] hover:border-[var(--data-stream)] hover:text-[var(--data-stream)] transition-colors",children:s})}function V(){const[s,t]=l.useState(""),[n,i]=l.useState(!1),a=l.useRef(null),{addMessage:c,isTyping:o}=v();l.useEffect(()=>{const r=a.current;r&&(r.style.height="auto",r.style.height=`${Math.min(r.scrollHeight,200)}px`)},[s]);const d=async r=>{r.preventDefault(),!(!s.trim()||o)&&(c({id:`msg_${Date.now()}`,type:"user",content:s.trim(),timestamp:new Date().toISOString()}),t(""),setTimeout(()=>{c({id:`msg_${Date.now()}_response`,type:"byrd",content:"I received your message. Processing...",timestamp:new Date().toISOString()})},1e3))};return e.jsxs("form",{onSubmit:d,className:p("flex-shrink-0 bg-[var(--obs-bg-base)] border-t border-[var(--obs-border)] p-4",n&&"shadow-[0_-4px_20px_rgba(0,255,255,0.1)]"),children:[e.jsxs("div",{className:"flex items-end gap-3 max-w-4xl mx-auto",children:[e.jsx("div",{className:"flex-1 relative",children:e.jsx("textarea",{ref:a,value:s,onChange:r=>t(r.target.value),onFocus:()=>i(!0),onBlur:()=>i(!1),onKeyDown:r=>{r.key==="Enter"&&!r.shiftKey&&(r.preventDefault(),d(r))},placeholder:"Transmit to BYRD...",rows:1,className:p("w-full px-4 py-3 rounded resize-none","bg-[var(--obs-bg-surface)]","border border-[var(--obs-border)]","focus:bg-[var(--obs-bg-elevated)]","focus:border-[var(--data-stream)] focus:ring-1 focus:ring-[var(--data-stream)]/20","text-[var(--obs-text-primary)] placeholder-[var(--obs-text-tertiary)]","transition-all duration-200","max-h-48 overflow-y-auto","text-sm font-mono"),disabled:o})}),e.jsx("button",{type:"submit",disabled:!s.trim()||o,className:p("p-3 rounded transition-all duration-200","bg-[var(--data-stream)] hover:bg-[var(--data-stream-hover)] text-[var(--obs-bg-base)]","disabled:bg-[var(--obs-bg-elevated)] disabled:text-[var(--obs-text-tertiary)] disabled:cursor-not-allowed","active:scale-95","shadow-[0_0_12px_rgba(0,255,255,0.3)]","disabled:shadow-none"),"aria-label":"Send message",children:e.jsx(O,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex justify-center mt-2",children:e.jsx("span",{className:"obs-label text-[8px] text-[var(--obs-text-tertiary)]",children:o?"RECEIVING TRANSMISSION...":"READY TO TRANSMIT"})})]})}const K=l.lazy(()=>I(()=>import("./ByrdCatVisualization-CzmJ-Z4u.js"),__vite__mapDeps([0,1])));function Q(){const s=k(),{getRSIStatus:t}=j(),[n,i]=l.useState("idle"),[a,c]=l.useState(!1);return l.useEffect(()=>{const o=async()=>{const r=await t();r&&(i(r.current_phase||"idle"),c(!!r.current_phase))};o();const d=setInterval(o,3e3);return()=>clearInterval(d)},[t]),e.jsxs("div",{className:"flex flex-col h-screen bg-[var(--obs-bg-base)]",children:[e.jsx("header",{className:"flex-shrink-0 bg-[var(--obs-bg-surface)] border-b border-[var(--obs-border)] px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[e.jsx("button",{onClick:()=>s(-1),className:"p-2 -ml-2 hover:bg-[var(--obs-bg-elevated)] rounded transition-colors focus:outline-none focus:ring-2 focus:ring-[var(--data-stream)]","aria-label":"Go back",children:e.jsx(R,{className:"w-5 h-5 text-[var(--obs-text-secondary)]"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"obs-label text-sm tracking-widest text-[var(--obs-text-primary)]",children:"BYRD TERMINAL"}),e.jsx(_,{status:a?"nominal":"inactive",size:"sm"})]}),e.jsx("button",{onClick:()=>s("/more"),className:"p-2 -mr-2 hover:bg-[var(--obs-bg-elevated)] rounded transition-colors focus:outline-none focus:ring-2 focus:ring-[var(--data-stream)]","aria-label":"Settings",children:e.jsx(C,{className:"w-5 h-5 text-[var(--obs-text-secondary)]"})})]})}),e.jsxs("div",{className:"flex-shrink-0 h-[35vh] min-h-[240px] max-h-[400px] relative border-b border-[var(--obs-border)]",children:[e.jsx(l.Suspense,{fallback:e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-[var(--obs-bg-surface)]",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-[var(--data-stream)] border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"obs-label text-[9px] text-[var(--obs-text-tertiary)]",children:"INITIALIZING CONSCIOUSNESS"})]})}),children:e.jsx(K,{rsiPhase:n,systemState:a?"running":"stopped",showScanners:a,showParticles:!0,compact:!0,className:"w-full h-full"})}),e.jsx("div",{className:"absolute bottom-3 left-3",children:e.jsxs("div",{className:"observatory-panel px-3 py-2",children:[e.jsx("div",{className:"obs-label text-[9px] text-[var(--obs-text-tertiary)] mb-0.5",children:"RSI PHASE"}),e.jsx("div",{className:"obs-label text-xs uppercase",style:{color:`var(--rsi-${n}, var(--obs-text-tertiary))`},children:n})]})}),e.jsx("div",{className:"absolute inset-0 pointer-events-none obs-vignette"})]}),e.jsx(Y,{}),e.jsx("div",{className:"flex-1 min-h-0 bg-[var(--obs-bg-surface)]",children:e.jsx(G,{})}),e.jsx(V,{})]})}export{Q as ByrdChatPage,Q as default};
