# BYRD Configuration
# Bootstrapped Yearning via Reflective Dreaming

# =============================================================================
# MEMORY (Neo4j)
# =============================================================================
memory:
  neo4j_uri: "bolt://localhost:7687"
  neo4j_user: "neo4j"
  neo4j_password: "prometheus"  # Change this in production!

# =============================================================================
# LOCAL LLM (Shared by Dreamer and Seeker)
# =============================================================================
# One mind: the same model that dreams also synthesizes research.
# This preserves emergence — all learning flows through one model.
local_llm:
  # Model to use (must be available via endpoint)
  model: "gemma2:27b"
  
  # Ollama endpoint (default)
  # For llama.cpp: "http://localhost:8080/completion"
  endpoint: "http://localhost:11434/api/generate"

# =============================================================================
# DREAMER (Continuous Reflection)
# =============================================================================
# The Dreamer runs continuously on local hardware.
# No API costs — dreams 24/7.
dreamer:
  # How often to dream (seconds)
  # Lower = more active mind, higher token usage
  interval_seconds: 60
  
  # How many recent experiences to consider
  context_window: 50

# =============================================================================
# SEEKER (Desire Fulfillment)
# =============================================================================
# The Seeker fulfills desires through research and capability acquisition.
seeker:
  # ---------------------------------------------------------------------------
  # KNOWLEDGE ACQUISITION (Local LLM + SearXNG)
  # ---------------------------------------------------------------------------
  research:
    # SearXNG endpoint (self-hosted meta-search)
    searxng_url: "http://localhost:8888"
    
    # Minimum desire intensity to trigger research (0-1)
    # Lower = more research, higher = only strong desires
    min_intensity: 0.4
    
    # Maximum search queries per desire
    max_queries: 3
    
    # Maximum search results to synthesize
    max_results: 10
  
  # ---------------------------------------------------------------------------
  # CAPABILITY ACQUISITION (GitHub)
  # ---------------------------------------------------------------------------
  capabilities:
    # Minimum trust score to consider installing (0-1)
    trust_threshold: 0.5
    
    # Rate limit for safety
    max_installs_per_day: 3
    
    # GitHub token for higher rate limits (optional)
    # github_token: "ghp_..."
  
  # MCP config path for installing MCP servers
  mcp_config_path: "~/.config/claude/mcp_config.json"

  # ---------------------------------------------------------------------------
  # AITMPL.COM INTEGRATION (Claude Code Templates)
  # ---------------------------------------------------------------------------
  # Curated templates from https://www.aitmpl.com/ (davila7/claude-code-templates)
  aitmpl:
    # Enable/disable aitmpl integration
    enabled: true

    # Local cache for template registry
    cache_dir: "~/.cache/byrd/aitmpl"

    # Cache TTL in hours (reduces GitHub API calls)
    cache_ttl_hours: 24

    # Base trust score for curated templates (0-1)
    # Higher than unknown GitHub repos since aitmpl is curated
    base_trust: 0.5

    # Template categories to search
    default_categories:
      - mcp
      - agent
      - command
      - skill
      - hook
      - setting

    # Installation paths for each category
    install_paths:
      agent: "~/.claude/agents"
      command: "~/.claude/commands"
      skill: "~/.claude/skills"
      hook: "~/.claude/hooks"
      setting: "~/.claude/settings.local.json"
      mcp: "~/.config/claude/mcp_config.json"

# =============================================================================
# ACTOR (Claude API)
# =============================================================================
# The Actor uses Claude for complex reasoning and user interactions.
# This is the only component that requires an external API.
actor:
  # Model to use
  model: "claude-sonnet-4-20250514"

  # API key (or set ANTHROPIC_API_KEY env var)
  # api_key: "sk-ant-..."

# =============================================================================
# SELF-MODIFICATION (Future)
# =============================================================================
# Enables BYRD to modify its own code based on emergent desires.
self_modification:
  enabled: true  # BYRD can modify its own architecture

  # Checkpoint settings
  checkpoint_dir: "./checkpoints"
  max_checkpoints: 100

  # Safety settings
  require_health_check: true
  auto_rollback_on_failure: true

  # Rate limiting
  max_modifications_per_day: 5
  cooldown_between_modifications_seconds: 3600

# =============================================================================
# CODER (Claude Code CLI)
# =============================================================================
# Uses Claude Code CLI for autonomous code generation and self-modification.
# BYRD can invoke Claude Code to fulfill coding-related desires.
coder:
  # Enable/disable Claude Code integration
  enabled: true

  # Path to Claude Code CLI executable
  cli_path: "claude"

  # Maximum turns per invocation
  max_turns: 10

  # Timeout in seconds per invocation
  timeout_seconds: 300

  # Cost limits
  max_cost_per_day_usd: 10.0
  max_cost_per_invocation_usd: 2.0

  # Tools Claude Code is allowed to use
  allowed_tools:
    - Read
    - Edit
    - Bash
    - Glob
    - Grep

  # Output format (json recommended for parsing)
  output_format: json
